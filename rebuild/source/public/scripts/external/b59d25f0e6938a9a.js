;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="117f57b0-ff9c-e69f-a442-c3ef09cc77a0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,818138,e=>{"use strict";var t=e.i(721281),r=e.i(878420),n=e.i(64386),i=e.i(276385),a=e.i(446530),o=e.i(123850),s=e.i(613355),u=e.i(714165),l=e.i(751273),c=e.i(625484),d=(0,o.createCssVarTokens)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),f=d.styleTokens,v=d.cssVars,p=(0,a.cssRecord)({avatarsRow:[{"& > *":{marginLeft:"calc(-0.4 * ".concat(f.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[s.rcss.center,s.rcss.overflow("hidden"),s.rcss.backgroundColor.backgroundDefault,s.rcss.color.foregroundDimmer,s.rcss.px(2),{borderRadius:"50%",minWidth:f.size,height:f.size,fontSize:f.fontSize}],tooltop:[{gap:f.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipText:[s.rcss.truncate,s.rcss.color.foregroundDimmer,{paddingLeft:f.iconTextGap,fontSize:f.tooltipFontSize}],stackItem:[]}),h={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function g(e){var a,o,s,d,f,g,m,b,S,y=e.activeUsers,w=e.visibleNumOfUsers,C=void 0===w?3:w,D=e.size,I=void 0===D?24:D,_=y.length,k=(S={},(0,t._)(S,v.size,I+"px"),(0,t._)(S,v.fontSize,(null!=(f=null==(a=h[I])?void 0:a.fontSize)?f:I)+"px"),(0,t._)(S,v.listGap,(null!=(g=null==(o=h[I])?void 0:o.listGap)?g:8)+"px"),(0,t._)(S,v.iconTextGap,(null!=(m=null==(s=h[I])?void 0:s.iconTextGap)?m:8)+"px"),(0,t._)(S,v.tooltipFontSize,(null!=(b=null==(d=h[I])?void 0:d.tooltipFontSize)?b:14)+"px"),S),R=_>C,x=y.slice(0,R?C-1:C);return(0,i.jsx)(l.Tooltip,{tooltip:(0,i.jsx)(c.View,{css:p.tooltop,style:k,children:y.map(function(e){var t;return(0,i.jsxs)(c.View,{row:!0,gap:2,align:"center",children:[(0,i.jsx)(u.Avatar,{size:(null==(t=h[I])?void 0:t.tooltipAvatarSize)||I,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,i.jsx)(c.View,{css:p.tooltipText,grow:!0,shrink:!0,children:e.username})]},e.username)})}),children:function(e,t){return(0,i.jsxs)(c.View,(0,n._)((0,r._)({},e),{tag:"ul",innerRef:t,css:p.avatarsRow,row:!0,style:k,children:[x.map(function(e,t){return(0,i.jsx)(c.View,{tag:"li",style:{zIndex:t+1},css:p.stackItem,children:(0,i.jsx)(u.Avatar,{size:I,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),R?(0,i.jsx)(c.View,{tag:"li",css:p.stackItem,style:{zIndex:x.length},children:(0,i.jsx)(c.View,{css:p.countCirlce,children:(0,i.jsxs)(c.View,{children:["+",_-C+1]})})}):null]}))}})}e.s(["default",()=>g])},349597,e=>{"use strict";var t,r=((t={}).AdminTutorialUpdate="admin-tutorial-update",t.CommunityPost="community-post",t.ProfileImage="profile-image",t.ProfileCoverImage="profile-cover-image",t.OrgProfileImage="org-profile-image",t.TemplateIcon="template-icon",t.ReplIcon="repl-icon",t.ReplCoverImage="repl-cover-image",t.TrainingProfileImage="training-profile-image",t);e.s(["DEFAULT_REPL_ICON",()=>"https://icons-util.replit.app/bash.svg","DEFAULT_REPL_IMAGE",()=>"https://icons-util.replit.app/bash.svg","ImageUploadContexts",()=>r])},971072,386594,e=>{"use strict";var t,r=e.i(297083),n=e.i(817556),i=e.i(344188),a=e.i(167626);(t={}).ArrayBuffer="ARRAY_BUFFER",t.BinaryString="BINARY_STRING",t.DataURL="DATA_URL",t.Text="TEXT";var o=function(e,t){return(0,a._)(e,window.File)?new Promise(function(r,n){var i=new window.FileReader;switch(i.onload=function(t){var i;(null==(i=t.target)?void 0:i.result)?r(t.target.result):n(Error('Failed to read file "'.concat(e.name,'"')))},i.onerror=n,t){case"ARRAY_BUFFER":i.readAsArrayBuffer(e);break;case"BINARY_STRING":i.readAsBinaryString(e);break;case"DATA_URL":i.readAsDataURL(e);break;case"TEXT":i.readAsText(e)}}):Promise.all(Array.from(e).filter(function(e){return!!e}).map(function(e){return o(e,t)}))},s=function(e){return o(e,"ARRAY_BUFFER")},u=function(e){return o(e,"DATA_URL")};function l(e){return(0,r._)(function(){var t;return(0,n._)(this,function(r){switch(r.label){case 0:return[4,u(e)];case 1:if(t=r.sent(),e.size>1e7)throw Error("This image is over the ".concat(10,"MB maximum"));if(!t)throw Error("Expected file");return[2,t]}})})()}function c(e,t){return(0,r._)(function(){return(0,n._)(this,function(r){switch(r.label){case 0:return[4,(0,i.postJson)("/data/images/upload",{image:e,context:t})];case 1:return[2,r.sent()]}})})()}e.s(["readFileAsArrayBuffer",()=>s,"readFileAsDataURL",()=>u],386594);var d=["image/png","image/jpeg","image/gif","image/webp"];e.s(["ACCEPTABLE_IMAGE_UPLOAD_TYPES",()=>d,"UPLOAD_LIMIT_BYTES",()=>1e7,"postImage",()=>c,"readImageAsDataURL",()=>l],971072)},422025,e=>{"use strict";var t=e.i(297083),r=e.i(530658),n=e.i(817556),i=e.i(389959),a=e.i(971072);function o(e){var o=e.onUploadPreview,s=e.onUpload,u=e.onError,l=(0,r._)((0,i.useState)(!1),2),c=l[0],d=l[1];return{isLoading:c,uploadImage:(0,i.useCallback)(function(e,r){return(0,t._)(function(){var t,i,l,c,f,v;return(0,n._)(this,function(n){switch(n.label){case 0:if(d(!0),"image/svg+xml"===e.type)return u(Error("SVG images are not allowed")),[2,!1];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,a.readImageAsDataURL)(e)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),u(Error("This image is over the ".concat(a.UPLOAD_LIMIT_BYTES/1e6,"MB maximum"))),[2,!1];case 4:o({dataUrl:t}),i=null,n.label=5;case 5:return n.trys.push([5,7,,8]),[4,(0,a.postImage)(t,r)];case 6:return i=n.sent(),[3,8];case 7:return l=n.sent(),c="Something went wrong",c=l.message.toLowerCase().includes("entity too large")?"This image is over the 1MB maximum":l.message,o({dataUrl:""}),d(!1),u(Error(c)),[2,!1];case 8:if(f=i.id,v=i.url,"number"!=typeof f)throw Error("Expected id");if("string"!=typeof v)throw Error("Expected url");d(!1),n.label=9;case 9:return n.trys.push([9,11,,12]),[4,s({id:f,url:v})];case 10:return n.sent(),[3,12];case 11:return u(n.sent()),[2,!1];case 12:return[2,!0]}})})()},[u,s,o])}}e.s(["default",()=>o])},196353,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10.25 5a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm0 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm0 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},757390,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v10.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V3a.75.75 0 0 1 .75-.75Zm-9 12a.75.75 0 0 1 .75.75v4A1.25 1.25 0 0 0 5 20.25h14A1.25 1.25 0 0 0 20.25 19v-4a.75.75 0 0 1 1.5 0v4A2.75 2.75 0 0 1 19 21.75H5A2.75 2.75 0 0 1 2.25 19v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},47503,e=>{"use strict";var t=e.i(878420),r=e.i(569384),n=e.i(973245),i=e.i(304277);function a(){var e=(0,r._)(["\n  query CurrentUserId {\n    currentUser {\n      id\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,n.gql)(a());function u(){var e,r,n=(e=(0,t._)({},o,void 0),i.useQuery(s,e)).data;return(null==n||null==(r=n.currentUser)?void 0:r.id)||null}e.s(["useCurrentUserId",()=>u],47503)},97992,(e,t,r)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},133723,(e,t,r)=>{"use strict";var n=e.r(97992);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function e(e,t,r,i,a,o){if(o!==n){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return r.PropTypes=r,r}},203537,(e,t,r)=>{t.exports=e.r(133723)()},162914,e=>{"use strict";var t=e.i(530658),r=e.i(389959);function n(e,n){var i=(0,t._)((0,r.useState)(e),2),a=i[0],o=i[1];return(0,r.useEffect)(function(){var t=setTimeout(function(){o(e)},n);return function(){clearTimeout(t)}},[e,n]),a}e.s(["default",()=>n])},376847,e=>{"use strict";var t=e.i(276385),r=e.i(399528),n=e.i(921521),i=e.i(441329),a=e.i(446530),o=e.i(613355),s=e.i(140487),u=e.i(739521),l=e.i(960178),c=e.i(625484),d=e.i(283110),f=e.i(121817),v=(0,a.cssRecord)({button:[o.rcss.flex.growAndShrink(1)],closeButton:[o.rcss.position.absolute,o.rcss.top(8),o.rcss.right(8),o.rcss.p(4),o.rcss.borderRadius(4),o.rcss.cursor.pointer,o.rcss.color.foregroundDimmer,{"&:hover":{backgroundColor:"var(--color-background-higher)"}}]});e.s(["default",0,function(e){var a=e.isOpen,o=e.text,p=e.disableHomeButton,h=e.onDismiss,g=(0,r.useRouter)(),m=(0,i.isInBonsaiWebview)(g),b=(0,n.default)();return(0,t.jsx)(u.Modal,{preventClose:!0,isOpen:a,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,t.jsxs)(c.View,{gap:16,style:{position:"relative"},children:[h?(0,t.jsx)(c.View,{css:v.closeButton,onClick:h,role:"button",tabIndex:0,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&h()},children:(0,t.jsx)(d.default,{size:16})}):null,(0,t.jsxs)(c.View,{row:!0,gap:16,align:"center",children:[(0,t.jsx)(f.default,{size:24}),(0,t.jsx)(l.Header,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,t.jsxs)(c.View,{pr:32,gap:16,children:[(0,t.jsx)(l.Text,{children:o||"Your connection to this App has been temporarily interrupted.\n            Usually this is because of a network issue."}),m?(0,t.jsx)(l.Text,{children:"If the issue continues please logout and re-login."}):null]}),(0,t.jsxs)(c.View,{row:!0,gap:16,children:[p||m||b?null:(0,t.jsx)(s.Button,{css:v.button,text:"Back to Home",onClick:function(){g.push("/home","~/")}}),(0,t.jsx)(s.Button,{text:"Refresh",colorway:"primary",css:v.button,onClick:function(){window.location.reload()}})]})]})})}])},399978,e=>{"use strict";var t,r=e.i(297083),n=e.i(346715),i=e.i(817556),a=e.i(826771),o=e.i(903381),s=((t={}).AlreadyExists="ALREADY_EXIST",t.FileRead="FILE_READ",t.Network="NETWORK",t);function u(e){return(0,r._)(function(e){var t,s,u,l,c,d,f,v,p,h,g,m;return(0,i._)(this,function(b){switch(b.label){case 0:if(t=e.parentPath,s=e.overwrite,u=e.fs,l=e.files,c=e.onStart,d=e.onUpload,f=e.onError,v=e.onDone,p=e.envMigrationFlag,l.length>1e6)throw Error("Trying to upload too many files at once.");if(l.reduce(function(e,t){return t.size+e},0)>0xc800000)throw Error("Total file upload size exceeds maximum limit.");return h=function(e){var t=e.targetPath,n=e.file,a=e.progress;return(0,r._)(function(){var e,r;return(0,i._)(this,function(i){switch(i.label){case 0:if(s)return[3,2];return[4,u.stat(t)];case 1:if(i.sent().exists)return f(e={file:n,path:t,error:"ALREADY_EXIST"}),[2,e];i.label=2;case 2:return[4,u.transferFile(t,n,function(e,t){a.current=t/e},p)];case 3:if(i.sent().error===o.FsErrors.NotReadable)return f(r={file:n,path:t,error:"FILE_READ"}),[2,r];return null==d||d({file:n,path:t}),[2,{path:t,file:n}]}})})()},g=l.map(function(e){var r=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+r:r,progress:(0,a.observableValue)(0),file:e}}),null==c||c(g),[4,Promise.all(g.map(h))];case 1:return m=b.sent(),null==v||v({parentPath:t,uploads:m.filter(function(e){return!("error"in e)}),errors:m.reduce(function(e,t){return"error"in t?(0,n._)(e).concat([t]):e},[])}),[2]}})}).apply(this,arguments)}e.s(["MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES",()=>0xc800000,"MAX_NUM_FILES_UPLOAD_LIMIT",()=>1e6,"UploadErrors",()=>s,"uploadFiles",()=>u])},490048,987860,e=>{"use strict";var t=e.i(878420),r=e.i(569384),n=e.i(973245),i=e.i(304277);e.i(566901);var a=e.i(655366);function o(){var e=(0,r._)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return o=function(){return e},e}var s=(0,n.gql)(o());function u(){var e=(0,r._)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editFileContents {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return l=function(){return e},e}function c(){var e=(0,r._)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}e.s(["PublishedReplShareInfoReplDataFragmentDoc",()=>s],987860);var d={},f=(0,n.gql)(u(),a.CrosisContextReplFragmentDoc,s),v=(0,n.gql)(l(),a.CrosisContextCurrentUserFragmentDoc),p=(0,n.gql)(c(),v);function h(e){var r=(0,t._)({},d,e);return i.useQuery(p,r)}e.s(["PublishReplDataFragmentDoc",()=>f,"usePublishCurrentUserQuery",()=>h],490048)},880176,e=>{"use strict";e.s(["default",0,{brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"},brands:{github:"#181717",twitter:"#00A8FF",discord:"#7289DA",facebook:"#3B5998",linkedin:"#0077B5"}}])},482206,e=>{"use strict";var t="https://twitter.com/intent/tweet";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.text,n=e.url,i=e.hashtags,a=e.via,o=new URLSearchParams;r&&o.append("text",r),n&&o.append("url",n),i&&o.append("hashtags",i.join(",")),a&&o.append("via",a);var s=o.toString();return s.length>0?"".concat(t,"?").concat(s):t}e.s(["default",()=>r,"tweetEndpoint",()=>t])},238804,e=>{"use strict";var t=e.i(276385),r=e.i(546284),n=e.i(629248),i=e.i(613355),a=e.i(960178),o=e.i(625484),s=e.i(606867);function u(e){var r=e.count,u=e.children,l=e.tooltip,c=e.small,d=(0,n.abbreviateNumber)(r);return(0,t.jsxs)(o.View,{"aria-label":l,"data-microtip-position":"left",role:"tooltip",css:[i.rcss.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],row:!0,gap:4,align:"center",children:[(0,t.jsx)(s.IconProvider,{size:c?12:void 0,children:u}),(0,t.jsx)(a.Text,{variant:c?"small":void 0,color:"dimmer",multiline:!1,children:d})]})}var l=e.i(357274),c=e.i(592877);function d(e){var n=e.repl;return(0,t.jsxs)(o.View,{row:!0,gap:16,align:"center",children:[(0,t.jsx)(u,{small:!0,count:n.publicForkCount,tooltip:(0,r.default)("remix",n.publicForkCount),children:(0,t.jsx)(c.default,{})}),(0,t.jsx)(u,{small:!0,count:n.likeCount,tooltip:(0,r.default)("like",n.likeCount),children:(0,t.jsx)(l.default,{})})]})}e.s(["default",()=>d],238804)},822243,e=>{"use strict";var t=e.i(346423),r=e.i(828914),n=e.i(544927),i=e.i(389959),a=e.i(904851),o=e.i(90659),s=e.i(872118),u=e.i(392324),l=e.i(852534),c=function(){function e(t){var r=this;(0,a._)(this,e),this.hooks=(0,l.wrapConnectorHooks)({dragSource:function(e,t){r.clearDragSource(),r.dragSourceOptions=t||null,(0,u.isRef)(e)?r.dragSourceRef=e:r.dragSourceNode=e,r.reconnectDragSource()},dragPreview:function(e,t){r.clearDragPreview(),r.dragPreviewOptions=t||null,(0,u.isRef)(e)?r.dragPreviewRef=e:r.dragPreviewNode=e,r.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}return(0,o._)(e,[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"reconnect",value:function(){var e=this.reconnectDragSource();this.reconnectDragPreview(e)}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e),t}},{key:"reconnectDragPreview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!(0,s.shallowEqual)(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!(0,s.shallowEqual)(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}(),d=e.i(687382),f=e.i(107327),v=!1,p=!1,h=function(){function e(t){(0,a._)(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}return(0,o._)(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){(0,t.invariant)(!v,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return v=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{v=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;(0,t.invariant)(!p,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return p=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{p=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}(),g=e.i(530658),m=e.i(505372),b=e.i(119468),S=function(){function e(t,r,n){(0,a._)(this,e),this.spec=t,this.monitor=r,this.connector=n}return(0,o._)(e,[{key:"beginDrag",value:function(){var e=this.spec,t=this.monitor,r=null;return null!=(r="object"===(0,b._)(e.item)?e.item:"function"==typeof e.item?e.item(t):{})?r:null}},{key:"canDrag",value:function(){var e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}},{key:"isDragging",value:function(e,t){var r=this.spec,n=this.monitor,i=r.isDragging;return i?i(n):t===e.getSourceId()}},{key:"endDrag",value:function(){var e=this.spec,t=this.monitor,r=this.connector,n=e.end;n&&n(t.getItem(),t),r.reconnect()}}]),e}();function y(e,a){var o,s,u,l,v,p,b,y,w,C=(0,n.useOptionalFactory)(e,a);(0,t.invariant)(!C.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var D=(o=(0,d.useDragDropManager)(),(0,i.useMemo)(function(){return new h(o)},[o])),I=(s=C.options,u=C.previewOptions,l=(0,d.useDragDropManager)(),v=(0,i.useMemo)(function(){return new c(l.getBackend())},[l]),(0,f.useIsomorphicLayoutEffect)(function(){return v.dragSourceOptions=s||null,v.reconnect(),function(){return v.disconnectDragSource()}},[v,s]),(0,f.useIsomorphicLayoutEffect)(function(){return v.dragPreviewOptions=u||null,v.reconnect(),function(){return v.disconnectDragPreview()}},[v,u]),v);return p=(0,d.useDragDropManager)(),b=(0,i.useMemo)(function(){return new S(C,D,I)},[D,I]),(0,i.useEffect)(function(){b.spec=C},[C]),y=b,w=(0,i.useMemo)(function(){var e=C.type;return(0,t.invariant)(null!=e,"spec.type must be defined"),e},[C]),(0,f.useIsomorphicLayoutEffect)(function(){if(null!=w){var e=(0,g._)((0,m.registerSource)(w,y,p),2),t=e[0],r=e[1];return D.receiveHandlerId(t),I.receiveHandlerId(t),r}},[p,D,I,y,w]),[(0,r.useCollectedProps)(C.collect,D,I),(0,i.useMemo)(function(){return I.hooks.dragSource()},[I]),(0,i.useMemo)(function(){return I.hooks.dragPreview()},[I])]}e.s(["useDrag",()=>y],822243)},315801,e=>{"use strict";function t(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.root,i=r.rootMargin,a=r.threshold;if("undefined"==typeof IntersectionObserver)return function(){};var o=new WeakMap,s=new IntersectionObserver(function(e){e.forEach(function(e){var r=o.get(e.target);if(!!r!==e.isIntersecting)if(e.isIntersecting){var n=t(e);"function"==typeof n?o.set(e.target,n):s.unobserve(e.target)}else r&&(r(e),o.delete(e.target))})},{root:n,rootMargin:i,threshold:void 0===a?1:a});return s.observe(e),function(){return s.disconnect()}}e.s(["inView",()=>t])},641326,e=>{"use strict";var t,r,n,i=((t={}).NotFound="NOT_FOUND",t.ParseError="PARSE_ERROR",t.Disconnected="DISCONNECTED",t.Unknown="UNKOWN_ERROR",t),a=((r={}).ChannelClosed="CHANNEL_CLOSED",r.JSONParseError="JSON_PARSE_ERROR",r.NotFound="NOT_FOUND",r.TOMLParseError="TOML_PARSE_ERROR",r.OpType="OP_TYPE",r.CouldNotWrite="COULD_NOT_WRITE",r.ReadLine="COULD_NOT_READ_LINE",r.Unknown="UNKNOWN_ERROR",r),o=((n={}).CHANGE="CHANGE",n.CHANNEL_OPENED="CHANNEL_OPENED",n);e.s(["DotReplitErrors",()=>i,"DotReplitUpdateErrors",()=>a,"Events",()=>o])},91442,e=>{"use strict";var t=e.i(541793),r=e.i(852819),n=(0,t.atom)(null),i=(0,t.atom)(function(e){var t=e(n);return(null==t?void 0:t.isVisible)?t.path:null}),a=(0,t.atom)(null,function(e,t,r,i){switch(i.type){case"focus":return void t(n,{hasFocus:!0,isVisible:!0,position:i.position,path:r});case"update":return void t(n,{hasFocus:i.hasFocus,isVisible:!0,position:i.position,path:r});case"blur":return void t(n,function(e){var t;return{hasFocus:!1,isVisible:!!(null==e?void 0:e.isVisible),position:null!=(t=null==e?void 0:e.position)?t:{line:1,column:1,offset:0},path:r}});case"unmount":return void t(n,null);case"hidden":return void t(n,function(e){var t;return{hasFocus:!1,isVisible:!1,position:null!=(t=null==e?void 0:e.position)?t:{line:1,column:1,offset:0},path:r}});case"unhidden":return void t(n,function(e){var t;return{hasFocus:!!(null==e?void 0:e.hasFocus),isVisible:!0,position:null!=(t=null==e?void 0:e.position)?t:{line:1,column:1,offset:0},path:r}})}});function o(){return(0,r.useSet)(a)}function s(){return(0,r.useValue)(i)}function u(){return(0,r.useGet)(n)}function l(){return(0,r.useObservableValue)(n)}e.s(["cursorStateAtom",()=>n,"useCursorFilepath",()=>s,"useGetCursorState",()=>u,"useObservableCursorState",()=>l,"useUpdateCursorState",()=>o])},927158,e=>{"use strict";var t=e.i(346715),r=e.i(389959),n=e.i(400081),i=e.i(400082);function a(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=(0,n.usePid2InternalsContextDoNotUseOrYouWillBeFired)(),s=(0,i.usePid2Session)();return(0,r.useMemo)(function(){return o&&s?e(o.client,s):null},[o,s].concat((0,t._)(a)))}e.s(["usePid2Callback",()=>a])},207237,e=>{"use strict";var t=e.i(389959),r=e.i(714260);function n(){var e=(0,t.useContext)(r.default);if(!e)throw Error("Expected Repl ID to be in context");return e}e.s(["default",()=>n])},496019,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 4.25a.75.75 0 0 1 .75.75v12.19l5.72-5.72a.75.75 0 1 1 1.06 1.06l-7 7a.75.75 0 0 1-1.06 0l-7-7a.75.75 0 1 1 1.06-1.06l5.72 5.72V5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},608263,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M11.47 4.47a.75.75 0 0 1 1.06 0l7 7a.75.75 0 1 1-1.06 1.06l-5.72-5.72V19a.75.75 0 0 1-1.5 0V6.81l-5.72 5.72a.75.75 0 0 1-1.06-1.06l7-7Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},641536,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M2.25 4.5A2.25 2.25 0 0 1 4.5 2.25h15a2.25 2.25 0 0 1 2.25 2.25v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3a2.25 2.25 0 0 1-2.25 2.25h-11a2.25 2.25 0 0 1-2.25-2.25v-3c0-.576.217-1.102.573-1.5a2.242 2.242 0 0 1-.573-1.5v-3c0-.263.045-.515.128-.75H4.5A2.25 2.25 0 0 1 2.25 7.5v-3ZM19.5 8.25a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-15a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h15Zm-11 1.5a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-11Zm11 6h-11a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},521684,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{d:"M22.223 0H1.772C.792 0 0 .773 0 1.73v20.536C0 23.222.792 24 1.772 24h20.451c.98 0 1.777-.778 1.777-1.73V1.73C24 .773 23.203 0 22.223 0ZM7.12 20.452H3.558V8.995H7.12v11.457ZM5.34 7.434a2.064 2.064 0 1 1 0-4.125 2.063 2.063 0 0 1 0 4.125Zm15.112 13.018h-3.558v-5.57c0-1.326-.024-3.037-1.852-3.037-1.851 0-2.133 1.449-2.133 2.944v5.663H9.356V8.995h3.413v1.566h.047c.473-.9 1.636-1.852 3.365-1.852 3.605 0 4.27 2.372 4.27 5.457v6.286Z"})}))}e.s(["default",()=>a])},403675,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4 21.75A2.75 2.75 0 0 1 1.25 19V5A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v1.213c.835.559 1.34 1.56 1.2 2.643l-.98 7.5a2.75 2.75 0 0 1-2.726 2.394H4ZM3.116 4.116A1.25 1.25 0 0 1 4 3.75h4.599l1.777 2.666A.75.75 0 0 0 11 6.75h9A1.25 1.25 0 0 1 21.25 8v.75H5.256a2.75 2.75 0 0 0-2.506 1.617V5c0-.332.132-.65.366-.884ZM4.278 20.25h15.966a1.25 1.25 0 0 0 1.24-1.088l.978-7.5a1.25 1.25 0 0 0-1.24-1.412H5.256a1.25 1.25 0 0 0-1.24 1.088l-.978 7.5a1.25 1.25 0 0 0 1.24 1.412Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},978669,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M20.593 10.91a1.25 1.25 0 0 1 0 2.18l-14.48 8.145a1.25 1.25 0 0 1-1.863-1.09V3.855a1.25 1.25 0 0 1 1.863-1.09l14.48 8.146Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},759097,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1-1.06 1.06l-3.72-3.72V15a.75.75 0 0 1-1.5 0V4.81L7.53 8.53a.75.75 0 0 1-1.06-1.06l5-5ZM3 14.25a.75.75 0 0 1 .75.75v4A1.25 1.25 0 0 0 5 20.25h14A1.25 1.25 0 0 0 20.25 19v-4a.75.75 0 0 1 1.5 0v4A2.75 2.75 0 0 1 19 21.75H5A2.75 2.75 0 0 1 2.25 19v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},812432,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsxs)(i.default,(0,r._)((0,t._)({},e),{children:[(0,n.jsx)("path",{fill:"url(#paint0_linear_7101_264)",fillRule:"evenodd",d:"M24 3.429a3.429 3.429 0 1 0-6.857 0 3.429 3.429 0 0 0 6.857 0ZM6.857 12A3.429 3.429 0 1 0 0 12a3.429 3.429 0 0 0 6.857 0ZM3.43 0a3.429 3.429 0 0 1 3.428 3.429v.027a5.143 5.143 0 0 0 5.14 5.115H12a3.429 3.429 0 1 1 0 6.858h-.007a5.143 5.143 0 0 0-5.136 5.116v.026a3.429 3.429 0 1 1-3.428-3.428h.004a5.143 5.143 0 0 0-.005-10.286 3.429 3.429 0 0 1 0-6.857Zm12 3.429a3.429 3.429 0 1 0-3.43 3.428 5.143 5.143 0 0 1 .005 10.286H12a3.429 3.429 0 1 0 3.429 3.428v-.027a5.143 5.143 0 0 1 5.135-5.115h.007a3.429 3.429 0 1 0 0-6.858h-.003a5.143 5.143 0 0 1-5.14-5.106V3.43Zm5.142 13.714a3.429 3.429 0 1 1 0 6.857 3.429 3.429 0 0 1 0-6.857Z",clipRule:"evenodd"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"paint0_linear_7101_264",x1:"0",x2:"24",y1:"0",y2:"24",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#A694FF"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#795EFF"})]})})]}))}e.s(["default",()=>a])},513905,584647,375310,803542,698626,e=>{"use strict";var t=e.i(530658),r=e.i(389959),n=e.i(541793);function i(){return(0,t._)((0,r.useState)(function(){return(0,n.createStore)()}),1)[0]}e.s(["useInitStore",()=>i],513905);var a=e.i(394212),o=e.i(297083),s=e.i(817556),u=e.i(814563),l=e.i(299798),c=e.i(927158),d=e.i(852819),f=(0,n.atom)([]);function v(){var e=(0,d.useSet)(f);(0,l.usePid2)(function(t,r){var n=r.signal;return(0,o._)(function(){var r,i,o,u,l,c,d,f;return(0,s._)(this,function(s){switch(s.label){case 0:r=t.jsNotebook.takeoverRequestsStatus.subscribe({},{signal:n}).resReadable,i=!1,o=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),l=(0,a._)(r),s.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=s.sent()).done))return[3,5];(d=c.value).ok&&e(d.payload.requests),s.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return f=s.sent(),o=!0,u=f,[3,12];case 7:if(s.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(o)throw u;return[7];case 11:return[7];case 12:return[2,function(){e([])}]}})})()},[e])}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sessionId,n=void 0===t?null:t,i=(0,d.useValue)((0,r.useMemo)(function(){return(0,u.selectAtom)(f,function(e){var t,r,i,a=n?e.filter(function(e){return e.sessionId===n}):e,o=null!=(t=a.find(function(e){return"pending"===e.status}))?t:null,s=null!=(r=a.find(function(e){return"accepted"===e.status}))?r:null;return null!=(i=null!=s?s:o)?i:null})},[n])),a=(0,c.usePid2Callback)(function(e){return function(){return(0,o._)(function(){return(0,s._)(this,function(t){return i&&"pending"===i.status&&e.jsNotebook.acceptTakeover.subscribe({sessionId:i.sessionId}),[2]})})()}},[i]),l=(0,c.usePid2Callback)(function(e){return function(t){return(0,o._)(function(){return(0,s._)(this,function(r){switch(r.label){case 0:if(!i||"accepted"!==i.status)return[2];return[4,e.jsNotebook.completeTakeover.rpc({sessionId:i.sessionId,userNotes:t})];case 1:if(!r.sent().ok)throw Error("Failed to complete takeover");return[2]}})})()}},[i]),v=(0,c.usePid2Callback)(function(e){return function(){return(0,o._)(function(){return(0,s._)(this,function(t){switch(t.label){case 0:if(!i)return[2];return[4,e.jsNotebook.rejectTakeover.rpc({sessionId:i.sessionId})];case 1:return t.sent(),[2]}})})()}},[i]);return(0,r.useMemo)(function(){return i&&a&&l&&v?{request:i,accept:a,complete:l,reject:v}:null},[i,a,l,v])}e.s(["useCurrentAgentTestingTakeover",()=>p,"useTrackAgentTestingTakeoverRequests",()=>v],584647);var h=(0,n.atom)(null);function g(){return(0,d.useValue)(h)}function m(){return(0,d.useSet)(h)}e.s(["usePendingDeleteFile",()=>g,"useSetPendingDeleteFile",()=>m],375310);var b=e.i(131141),S=e.i(125674),y=(0,n.atom)(new Map),w=(0,n.atom)(null,function(e,t,r){t(y,function(e){return(0,b.produce)(e,function(e){r.indicatorType?e.set(r.paneType,r.indicatorType):e.delete(r.paneType)})})});function C(){return(0,d.useSet)(w)}function D(e){var t=e.paneType;return(0,d.useValue)((0,S.default)(function(){return(0,n.atom)(function(e){return t?e(y).get(t):void 0})},[t]))}e.s(["usePaneIndicator",()=>D,"useSetPaneIndicator",()=>C],803542),e.i(878420);var I=e.i(569384),_=e.i(973245);function k(){var e=(0,I._)(["\n  query WorkspaceSessionPresence($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return k=function(){return e},e}e.i(304277),e.i(566901);var R=(0,_.gql)(k());e.s(["WorkspaceSessionPresenceDocument",()=>R],698626)},520839,e=>{"use strict";var t=Object.values(e.i(880176).default.multiplayer);function r(e){var r={};return t.forEach(function(e){r[e]=0}),e.forEach(function(e){r[e.color]++}),Object.keys(r).sort(function(e,t){return r[e]-r[t]})[0]}function n(e){var t=e.sessions.sort(function(e,t){return e.timestamp-t.timestamp}),r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;if(s.activeFile)return s.activeFile}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}function i(e,t){var r=t.find(function(t){return t.sessions.some(function(t){return t.id===e})});if(!r)throw Error("Expected user with session ID ".concat(e));return r}function a(e){var t=e.seconds,r=e.nanos;return Number(t||0)+(r||0)/1e9}e.s(["convertTimestampToNumber",()=>a,"getActiveFileForUser",()=>n,"getLeastUsedColor",()=>r,"getUserForSession",()=>i])},663762,e=>{"use strict";var t=e.i(297083),r=e.i(530658),n=e.i(346715),i=e.i(817556),a=e.i(389959),o=e.i(992785),s=e.i(131141),u=e.i(541793),l=e.i(814563),c=e.i(223808),d=e.i(698626),f=e.i(47503),v=e.i(125674),p=e.i(173738),h=e.i(520839),g=e.i(852819),m=(0,u.atom)(new Map),b=(0,u.atom)(null,function(e,t,r){return t(m,function(e){return(0,s.produce)(e,function(e){e.set(r.userId,r.color)})})});function S(){var e=(0,g.useGet)(w),t=(0,g.useSet)(b);return(0,a.useCallback)(function(r){var n,i=e(),a=null==(n=i.get(r.userId))?void 0:n.color;return a||t({color:a=(0,h.getLeastUsedColor)(Object.values(i)),userId:r.userId}),a},[e,t])}function y(e,t,r,i){var a=i||{timestamp:Math.floor(Date.now()/1e3),activeFile:null},o=e.get(t.id);o?o.sessions.set(t.session,a):e.set(t.id,{id:t.id,username:t.name,color:null!=r?r:(0,h.getLeastUsedColor)((0,n._)(e.values())),roles:t.roles,sessions:new Map([[t.session,a]])})}var w=(0,u.atom)(new Map);(0,l.selectAtom)(w,function(e){var t=new Map,n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=(0,r._)(o.value,2)[1],l=null,c=!0,d=!1,f=void 0;try{for(var v,p=u.sessions[Symbol.iterator]();!(c=(v=p.next()).done);c=!0){var h=(0,r._)(v.value,2)[1];h.activeFile&&(l&&l.timestamp>h.timestamp||(l=h))}}catch(e){d=!0,f=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw f}}if(null==l?void 0:l.activeFile){var g=t.get(l.activeFile),m={id:u.id,username:u.username,image:u.image,color:u.color,roles:u.roles};g?g.push(m):t.set(l.activeFile,[m])}}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t},o.default);var C=(0,l.selectAtom)(w,function(e){return(0,n._)(e.values()).map(function(e){return{id:e.id,username:e.username,color:e.color,image:e.image,roles:e.roles}})},o.default);function D(){return(0,g.useValue)(C)}function I(e){var t=e.id,r=e.name,n=e.session,i=e.roles;return t&&r&&n&&i?{id:t,name:r,session:n,roles:i}:null}function _(e){var t=e.seconds,r=e.nanos;return"number"!=typeof t||"number"!=typeof r?null:(0,h.convertTimestampToNumber)({seconds:t,nanos:r})}var k=(0,u.atom)(null,function(e,t,n,i){t(w,function(t){return(0,s.produce)(t,function(t){var a;if(null==(a=n.roster)?void 0:a.user){var o=!0,s=!1,u=void 0;try{for(var l,c=n.roster.user[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value,f=I(d);if(null!==f&&(null==f?void 0:f.id)!==i){var v=function(e,t){if(!e.files)return null;var r=e.files.find(function(e){return e.userId===t.id&&e.session===t.session});if(!r)return null;var n=r.timestamp?_(r.timestamp):null;return n?{activeFile:r.file||null,timestamp:n}:null}(n.roster,f),p=e(m).get(f.id);y(t,f,p,v)}}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return}if(n.join){var h=I(n.join);if(!h||h.id===i)return;var g=e(m).get(h.id);y(t,h,g);return}if(n.part){var b,S,w=n.part,C=w.id,D=w.session;if(!C||!D)return;b={id:C,session:D},(S=t.get(b.id))&&(1===S.sessions.size?t.delete(b.id):S.sessions.delete(b.session));return}if(n.fileOpened){var k=n.fileOpened,R=k.session,x=k.userId,P=k.file,A=n.fileOpened.timestamp?_(n.fileOpened.timestamp):null;if(!A||!R||!x||!P)return;var E=A,T=R,O=x,F=P,U=t.get(O);if(U){var M=U.sessions.get(T);M?(M.timestamp=E,M.activeFile=F):U.sessions.set(T,{timestamp:E,activeFile:F})}return}if(n.sessionTimestampUpdated){var j=n.sessionTimestampUpdated.session,V=n.sessionTimestampUpdated.timestamp?_(n.sessionTimestampUpdated.timestamp):null;if(!V||!j)return;!function(e,t){var n=t.session,i=t.timestamp,a=!0,o=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=(0,r._)(u.value,2)[1].sessions.get(n);if(c){c.timestamp=i;break}}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}(t,{timestamp:V,session:j});return}})})}),R=(0,u.atom)(null,function(e,n){return(0,t._)(function(){var t,a,o,u,l,c,f,v,h,g,m;return(0,i._)(this,function(i){switch(i.label){case 0:t=[],a=e(w),o=!0,u=!1,l=void 0;try{for(c=a[Symbol.iterator]();!(o=(f=c.next()).done);o=!0)h=(v=(0,r._)(f.value,2))[0],v[1].image||t.push(h)}catch(e){u=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(u)throw l}}if(!t.length)return[2];return[4,null===p.apolloClient||void 0===p.apolloClient?void 0:p.apolloClient.query({query:d.WorkspaceSessionPresenceDocument,variables:{userIds:t}})];case 1:if(!(m=null==(g=i.sent())?void 0:g.data.usersByIds))return[2];return n(w,function(e){return(0,s.produce)(e,function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=m[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=e.get(o.id);s&&(s.image=o.image)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}})}),[2]}})})()});function x(){var e=(0,f.useCurrentUserId)(),t=(0,g.useSet)(R),r=(0,g.useSet)(k),n=(0,g.useObservableValue)(w);return(0,a.useEffect)(function(){t();var e=(0,c.default)(t,2e3);return n.subscribe(function(){return e()})},[t,n]),(0,v.default)(function(){return function(t){e&&r(t,e)}},[r,e])}e.s(["useActiveUsers",()=>D,"useGetColorForUser",()=>S,"useUpdatePresence",()=>x])},423111,e=>{"use strict";e.i(530658),e.i(346715);var t=e.i(389959),r=e.i(541793),n=e.i(814563),i=e.i(826771),a=e.i(207237),o=e.i(282453),s=e.i(852819),u=(0,n.createJSONStorage)(function(){return{getItem:function(e){return o.default.get(e,"string")},setItem:function(e,t){return o.default.set(e,t)},removeItem:function(e){return o.default.remove(e)}}}),l=(0,n.atomWithStorage)("areHiddenFilesVisible",!1,u);function c(){return(0,s.useValue)(l)}function d(){return(0,s.useSet)(l)}var f=(0,r.atom)(null);function v(){return(0,s.useGet)(f)}function p(){return(0,s.useSet)(f)}var h=(0,r.atom)((0,i.observableValue)(!1));function g(){return(0,s.useValue)(h)}var m=(0,r.atom)(!1);function b(){return(0,s.useValue)(m)}function S(){return(0,s.useSet)(m)}function y(){var e=(0,a.default)(),r=e?"".concat("auth-blueprint-approved",":").concat(e):null;return[!!r&&"true"===o.default.get(r,"string"),(0,t.useCallback)(function(e){r&&o.default.set(r,e?"true":"false")},[r])]}(0,r.atom)([]);var w=(0,r.atom)(!1),C=(0,r.atom)(!1);function D(){return(0,s.useSet)(w)}function I(){return(0,s.useValue)(w)}function _(){return(0,s.useSet)(C)}function k(){return(0,s.useValue)(C)}(0,r.atom)(0),e.s(["useAreHiddenFilesVisible",()=>c,"useAuthBlueprint",()=>y,"useCookieWarningBannerDismissed",()=>b,"useGetFileRenameInProgress",()=>v,"useIsPublishClickedCompleted",()=>I,"useSetAreHiddenFilesVisible",()=>d,"useSetCookieWarningBannerDismissed",()=>S,"useSetFileRenameInProgress",()=>p,"useSetPublishClickedCompleted",()=>D,"useSetShouldShowRandomCheckpointSurvey",()=>_,"useShouldShowRandomCheckpointSurvey",()=>k,"useWebviewPortOpenedObservable",()=>g])},545082,e=>{"use strict";var t=e.i(276385),r=e.i(513905),n=e.i(852819);function i(e){var i=(0,r.useInitStore)();return(0,t.jsx)(n.SessionContext.Provider,{value:i,children:e.children})}e.i(584647),e.i(91442),e.i(375310),e.i(803542),e.i(663762),e.i(423111),e.s(["SessionProvider",()=>i])}]);

//# debugId=117f57b0-ff9c-e69f-a442-c3ef09cc77a0
//# sourceMappingURL=9b7f37b9a8973347.js.map