# Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†: PlannerAgent

**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:** 15 Ù†ÙˆÙÙ…Ø¨Ø± 2025  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0  
**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ù…ÙƒØªÙ…Ù„ 100%

---

## ğŸ“– Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

`PlannerAgent` Ù‡Ùˆ ÙˆÙƒÙŠÙ„ Ù…ØªØ®ØµØµ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø· Ù…Ø´Ø§Ø±ÙŠØ¹ ØªÙØµÙŠÙ„ÙŠØ©. ÙŠØ¹Ù…Ù„ ÙƒÙ†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙÙŠ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØŒ Ø­ÙŠØ« ÙŠØ­ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ø¥Ù„Ù‰ Ø®Ø·Ø· Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙ†ÙÙŠØ°.

### Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

1. **ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:** ÙÙ‡Ù… Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø³ØªÙ†ØªØ§Ø¬ Ø§Ù„Ù†Ø·Ø§Ù‚
2. **ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ù‡Ø§Ù…:** ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¥Ù„Ù‰ Ù…Ù‡Ø§Ù… Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙ†ÙÙŠØ°
3. **ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯:** Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ø¬Ù‡Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
4. **ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù‡ÙŠÙƒÙ„:** Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Ù…Ù„ÙØ§Øª ÙˆÙ…Ø¬Ù„Ø¯Ø§Øª)

### Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù…Ù…ÙŠØ²Ø©

- âœ… **Async-First Design:** Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© async
- âœ… **AI-Powered:** ÙŠØ³ØªØ®Ø¯Ù… LiteLLM Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù†Ù…Ø§Ø°Ø¬ AI
- âœ… **Resource Estimation:** ØªÙ‚Ø¯ÙŠØ± Ø¯Ù‚ÙŠÙ‚ Ù„Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯
- âœ… **Critical Path Analysis:** Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø­Ø±Ø¬ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹
- âœ… **Multi-Project Support:** Ø¯Ø¹Ù… 7 Ø£Ù†ÙˆØ§Ø¹ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø®ØªÙ„ÙØ©
- âœ… **Highly Tested:** 43 Ø§Ø®ØªØ¨Ø§Ø± unit + 5 Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª integration

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©

### Schemas Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

ÙŠØ³ØªØ®Ø¯Ù… PlannerAgent Ø¹Ø¯Ø© schemas Ù…Ø­Ø³Ù‘Ù†Ø©:

#### 1. **ProjectPlan**

Ø®Ø·Ø© Ù…Ø´Ø±ÙˆØ¹ ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø±Ø¯.

```python
from dev_platform.agents.schemas import ProjectPlan

plan = ProjectPlan(
    understanding="ÙÙ‡Ù… ÙˆØ§Ø¶Ø­ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹",
    project_type="web",
    technologies=["react", "nodejs", "mongodb"],
    tasks=[...],
    structure=ProjectStructure(...),
    next_steps=["Ø®Ø·ÙˆØ© 1", "Ø®Ø·ÙˆØ© 2"],
    resource_estimate=ResourceEstimate(...)
)
```

**Ø§Ù„Ø­Ù‚ÙˆÙ„:**
- `understanding: str` - ÙÙ‡Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
- `project_type: str` - Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (web/api/cli/...)
- `technologies: List[str]` - Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
- `tasks: List[Task]` - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
- `structure: ProjectStructure` - Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª
- `next_steps: List[str]` - Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©
- `resource_estimate: ResourceEstimate` - ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯

#### 2. **ResourceEstimate**

ØªÙ‚Ø¯ÙŠØ± Ø´Ø§Ù…Ù„ Ù„Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.

```python
from dev_platform.agents.schemas import ResourceEstimate

estimate = ResourceEstimate(
    total_estimated_hours=24.5,
    estimated_completion_days=3.0,
    complexity_breakdown={
        "trivial": 2,
        "simple": 5,
        "moderate": 3,
        "complex": 1
    },
    total_tasks=11,
    critical_path_hours=18.0,
    recommended_team_size=2
)
```

**Ø§Ù„Ø­Ù‚ÙˆÙ„:**
- `total_estimated_hours: float` - Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©
- `estimated_completion_days: float` - Ø£ÙŠØ§Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
- `complexity_breakdown: Dict[str, int]` - ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯
- `total_tasks: int` - Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…
- `critical_path_hours: float` - Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø­Ø±Ø¬
- `recommended_team_size: int` - Ø­Ø¬Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡

#### 3. **ProjectStructure**

Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ù„Ù„Ù…Ø´Ø±ÙˆØ¹.

```python
from dev_platform.agents.schemas import ProjectStructure

structure = ProjectStructure(
    files=["index.html", "app.js", "styles.css"],
    folders=["src", "public", "tests"]
)
```

#### 4. **TaskMetadata (ÙÙŠ Task)**

Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ù‡Ø§Ù….

```python
from dev_platform.agents.schemas import Task

task = Task(
    id=1,
    title="Setup database",
    description="Configure MongoDB",
    dependencies=[],
    estimated_hours=4.0,
    complexity="moderate",
    agent_type="executor"
)
```

**Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:**
- `estimated_hours: float` - Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©
- `complexity: str` - Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ (trivial/simple/moderate/complex/very_complex)
- `agent_type: str` - Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ (planner/executor/qa)

---

## ğŸ”Œ Async API

Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙÙŠ PlannerAgent Ù‡ÙŠ async.

### 1. `analyze_user_request()`

ØªØ­Ù„ÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ù†Ø´Ø§Ø¡ `ProjectPlan` ÙƒØ§Ù…Ù„.

#### Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

```python
from dev_platform.agents.planner_agent import PlannerAgent

planner = PlannerAgent()

# ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
plan = await planner.analyze_user_request(
    "Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ø¹ React Ùˆ Node.js"
)

print(f"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: {plan['project_type']}")
print(f"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ø§Ù…: {len(plan['tasks'])}")
print(f"Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©: {plan['resource_estimate']['total_estimated_hours']}")
```

#### Parameters

- `request: str` - Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø£Ùˆ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©)

#### Returns

```python
Dict[str, Any]:
    understanding: str
    project_type: str
    technologies: List[str]
    tasks: List[Dict]
    structure: Dict[str, List[str]]
    next_steps: List[str]
    resource_estimate: Dict[str, Any]
```

#### Ù…Ø«Ø§Ù„ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬

```json
{
  "understanding": "ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ø¹ ÙˆØ§Ø¬Ù‡Ø© React ÙˆØ®Ø§Ø¯Ù… Node.js",
  "project_type": "web",
  "technologies": ["react", "nodejs", "mongodb", "express"],
  "tasks": [
    {
      "id": 1,
      "title": "Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹",
      "description": "ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±",
      "dependencies": [],
      "estimated_hours": 2.0,
      "complexity": "simple",
      "agent_type": "executor"
    }
  ],
  "structure": {
    "files": ["package.json", "server.js"],
    "folders": ["client", "server", "models"]
  },
  "next_steps": ["ØªØ«Ø¨ÙŠØª dependencies", "Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"],
  "resource_estimate": {
    "total_estimated_hours": 24.0,
    "estimated_completion_days": 3.0,
    "complexity_breakdown": {"simple": 3, "moderate": 5, "complex": 2},
    "total_tasks": 10,
    "critical_path_hours": 18.0,
    "recommended_team_size": 2
  }
}
```

---

### 2. `create_task_breakdown()`

Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ù† `ProjectPlan`.

#### Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

```python
# Ø¨Ø¹Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ plan
tasks = await planner.create_task_breakdown(plan)

for task in tasks:
    print(f"Ø§Ù„Ù…Ù‡Ù…Ø© {task['id']}: {task['title']} ({task['estimated_hours']}h)")
```

#### Parameters

- `project_plan: Dict[str, Any]` - Ø®Ø·Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† `analyze_user_request()`

#### Returns

```python
List[Dict[str, Any]] - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
```

---

### 3. `estimate_resources_async()`

ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù….

#### Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

```python
from dev_platform.agents.schemas import Task

tasks = [
    Task(id=1, title="Task 1", description="...", dependencies=[]),
    Task(id=2, title="Task 2", description="...", dependencies=[1])
]

estimate = await planner.estimate_resources_async(tasks)

print(f"Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©: {estimate['total_estimated_hours']}")
print(f"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©: {estimate['estimated_completion_days']}")
```

#### Parameters

- `tasks: List[Task]` - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…

#### Returns

```python
Dict[str, Any]:
    total_estimated_hours: float
    estimated_completion_days: float
    complexity_breakdown: Dict[str, int]
    total_tasks: int
    critical_path_hours: float
    recommended_team_size: int
```

---

### 4. `generate_project_structure_async()`

ØªÙˆÙ„ÙŠØ¯ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙˆØ¹ ÙˆØ§Ù„ØªÙ‚Ù†ÙŠØ§Øª.

#### Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

```python
structure = await planner.generate_project_structure_async(
    project_type="web",
    technologies=["react", "nodejs"]
)

print("Ø§Ù„Ù…Ù„ÙØ§Øª:", structure['files'])
print("Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª:", structure['folders'])
```

#### Parameters

- `project_type: str` - Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (web/api/cli/script/data/mobile/desktop)
- `technologies: List[str]` - Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

#### Returns

```python
Dict[str, List[str]]:
    files: List[str]
    folders: List[str]
```

#### Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©

1. **`web`** - ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙŠØ¨ (React, Vue, Angular)
   - Files: `index.html`, `package.json`, `README.md`
   - Folders: `src/`, `public/`, `components/`, `styles/`, `tests/`

2. **`api`** - REST APIs (FastAPI, Express, Flask)
   - Files: `main.py`/`server.js`, `requirements.txt`/`package.json`
   - Folders: `api/`, `models/`, `routes/`, `tests/`

3. **`cli`** - Ø£Ø¯ÙˆØ§Øª Ø³Ø·Ø± Ø§Ù„Ø£ÙˆØ§Ù…Ø±
   - Files: `main.py`/`cli.js`, `README.md`
   - Folders: `commands/`, `utils/`, `tests/`

4. **`script`** - Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª Ø£ØªÙ…ØªØ©
   - Files: `script.py`/`script.js`, `config.yaml`
   - Folders: `utils/`, `logs/`

5. **`data`** - Ù…Ø´Ø§Ø±ÙŠØ¹ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª
   - Files: `main.py`, `requirements.txt`, `README.md`
   - Folders: `notebooks/`, `data/`, `models/`, `visualizations/`

6. **`mobile`** - ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…ÙˆØ¨Ø§ÙŠÙ„ (React Native, Flutter)
   - Files: `App.js`/`main.dart`, `package.json`
   - Folders: `src/`, `components/`, `assets/`, `screens/`

7. **`desktop`** - ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ (Electron, PyQt)
   - Files: `main.js`/`main.py`, `package.json`
   - Folders: `src/`, `renderer/`, `assets/`

---

## ğŸ”— Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ OpsCoordinator

### ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„ØªÙƒØ§Ù…Ù„

Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ³ØªØ¯Ø¹ÙŠ `OpsCoordinator` Ø§Ù„Ù€ PlannerØŒ ÙŠØªÙ…:

1. Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ `analyze_user_request()` Ù„ØªØ­Ù„ÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
2. Ø¥Ù†Ø´Ø§Ø¡ `ProjectPlan` ÙƒØ§Ù…Ù„ Ù…Ø¹ ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø±Ø¯
3. Ø­ÙØ¸ `ProjectPlan` ÙÙŠ `workflow["project_plan"]`
4. Ø­ÙØ¸ Ø§Ù„Ù€ workflow ÙÙŠ `WorkflowStorage` (SQLite)
5. ØªØ³Ø¬ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ: `âœ“ Saved ProjectPlan: X tasks, Y.Zh estimated`

### Ù…Ø«Ø§Ù„ Workflow ÙƒØ§Ù…Ù„

```python
from dev_platform.agents.ops_coordinator_agent import OpsCoordinatorAgent
from dev_platform.agents.schemas import WorkflowType

# Ø¥Ù†Ø´Ø§Ø¡ OpsCoordinator
coordinator = OpsCoordinatorAgent()
await coordinator.initialize_async()

# Ø¨Ø¯Ø¡ workflow Ù…Ø¹ Planner
workflow_id = await coordinator.start_and_execute_workflow_async(
    workflow_type=WorkflowType.DELIVERY_PIPELINE,
    project_name="Todo App",
    user_request="Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ù…Ù‡Ø§Ù… Ù…Ø¹ React Ùˆ Node.js",
    parameters={},
    auto_execute=True
)

# Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªÙ‚Ø¯Ù…
async for update in coordinator.get_progress_stream(workflow_id):
    print(f"Ø§Ù„ØªÙ‚Ø¯Ù…: {update['progress_percent']}%")
    print(f"Ø§Ù„Ø­Ø§Ù„Ø©: {update['status']}")

# Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ProjectPlan
workflow = await coordinator.storage.get_workflow(workflow_id)
plan = workflow['project_plan']

print(f"âœ“ Ø§Ù„Ø®Ø·Ø© Ø¬Ø§Ù‡Ø²Ø©: {plan['resource_estimate']['total_tasks']} Ù…Ù‡Ø§Ù…")
```

### Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ ÙÙŠ OpsCoordinator

```python
# Ù…Ù† dev_platform/agents/ops_coordinator_agent.py
async def _execute_delivery_pipeline_async(self, workflow: Dict, queue: asyncio.Queue) -> None:
    """ØªÙ†ÙÙŠØ° delivery pipeline Ù…Ø¹ Ø¯Ù…Ø¬ Planner"""
    
    # Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Planner
    plan_cmd = AgentCommand(
        agent_id="planner",
        action="analyze",
        parameters={"request": user_request}
    )
    plan_result = self._dispatch_agent_command(plan_cmd)
    
    if plan_result.success:
        plan = plan_result.result.get("plan", {})
        
        # Ø­ÙØ¸ ProjectPlan ÙÙŠ workflow (Phase 3.1 integration)
        workflow["project_plan"] = plan
        await self.storage.save_workflow(workflow)
        
        # ØªØ³Ø¬ÙŠÙ„
        tasks_count = len(plan.get("tasks", []))
        estimated_hours = plan.get("resource_estimate", {}).get("total_estimated_hours", 0)
        logger.info(f"âœ“ Saved ProjectPlan: {tasks_count} tasks, {estimated_hours}h estimated")
```

---

## ğŸ’¡ Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ©

### Example 1: Web Application

```python
planner = PlannerAgent()

# Ø·Ù„Ø¨ Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨
plan = await planner.analyze_user_request(
    "Ø£Ø­ØªØ§Ø¬ ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ Ù„Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ø³ÙŠØ· Ù…Ø¹ React Ùˆ Firebase"
)

# Ø§Ù„Ù†ØªÙŠØ¬Ø©
{
  "understanding": "Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ø³ÙŠØ· Ù…Ø¹ ÙˆØ§Ø¬Ù‡Ø© React ÙˆÙ‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Firebase",
  "project_type": "web",
  "technologies": ["react", "firebase", "react-router", "tailwindcss"],
  "tasks": [
    {
      "id": 1,
      "title": "Ø¥Ø¹Ø¯Ø§Ø¯ React App",
      "estimated_hours": 1.0,
      "complexity": "trivial"
    },
    {
      "id": 2,
      "title": "ØªÙƒÙˆÙŠÙ† Firebase",
      "estimated_hours": 2.0,
      "complexity": "simple"
    },
    {
      "id": 3,
      "title": "Ø¨Ù†Ø§Ø¡ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
      "estimated_hours": 6.0,
      "complexity": "moderate"
    },
    {
      "id": 4,
      "title": "Ù†Ø¸Ø§Ù… Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚",
      "estimated_hours": 8.0,
      "complexity": "complex"
    }
  ],
  "resource_estimate": {
    "total_estimated_hours": 24.0,
    "estimated_completion_days": 3.0,
    "total_tasks": 8
  }
}
```

---

### Example 2: REST API

```python
plan = await planner.analyze_user_request(
    "Ø¨Ù†Ø§Ø¡ REST API Ù„Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¹ FastAPI Ùˆ PostgreSQL"
)

# Ø§Ù„Ù†ØªÙŠØ¬Ø©
{
  "understanding": "REST API Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (CRUD) Ù…Ø¹ FastAPI Ùˆ PostgreSQL",
  "project_type": "api",
  "technologies": ["fastapi", "postgresql", "sqlalchemy", "pydantic"],
  "tasks": [
    {
      "id": 1,
      "title": "Ø¥Ø¹Ø¯Ø§Ø¯ FastAPI",
      "estimated_hours": 1.0
    },
    {
      "id": 2,
      "title": "Ø¥Ø¹Ø¯Ø§Ø¯ PostgreSQL Ùˆ SQLAlchemy",
      "estimated_hours": 2.0
    },
    {
      "id": 3,
      "title": "ØªØ¹Ø±ÙŠÙ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",
      "estimated_hours": 3.0
    },
    {
      "id": 4,
      "title": "Ø¨Ù†Ø§Ø¡ endpoints (CRUD)",
      "estimated_hours": 6.0
    },
    {
      "id": 5,
      "title": "Ø¥Ø¶Ø§ÙØ© authentication",
      "estimated_hours": 8.0
    }
  ],
  "resource_estimate": {
    "total_estimated_hours": 20.0,
    "estimated_completion_days": 2.5
  }
}
```

---

### Example 3: CLI Tool

```python
plan = await planner.analyze_user_request(
    "Ø£Ø¯Ø§Ø© Ø³Ø·Ø± Ø£ÙˆØ§Ù…Ø± Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø¹ Python"
)

# Ø§Ù„Ù†ØªÙŠØ¬Ø©
{
  "understanding": "Ø£Ø¯Ø§Ø© CLI Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (Ø¥Ù†Ø´Ø§Ø¡ØŒ Ø­Ø°ÙØŒ Ù‚Ø§Ø¦Ù…Ø©)",
  "project_type": "cli",
  "technologies": ["python", "click", "rich"],
  "tasks": [
    {
      "id": 1,
      "title": "Ø¥Ø¹Ø¯Ø§Ø¯ CLI framework (Click)",
      "estimated_hours": 1.0
    },
    {
      "id": 2,
      "title": "Ø£Ù…Ø± list Ù„Ù„Ù…Ù„ÙØ§Øª",
      "estimated_hours": 2.0
    },
    {
      "id": 3,
      "title": "Ø£Ù…Ø± create Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª",
      "estimated_hours": 3.0
    },
    {
      "id": 4,
      "title": "Ø£Ù…Ø± delete Ù„Ø­Ø°Ù Ù…Ù„ÙØ§Øª",
      "estimated_hours": 2.0
    }
  ],
  "resource_estimate": {
    "total_estimated_hours": 8.0,
    "estimated_completion_days": 1.0
  }
}
```

---

## ğŸ“š Best Practices

### Ù…ØªÙ‰ ØªØ³ØªØ®Ø¯Ù… PlannerØŸ

âœ… **Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ø¹Ù†Ø¯Ù…Ø§:**
- ØªØ­ØªØ§Ø¬ ØªØ­Ù„ÙŠÙ„ Ø·Ù„Ø¨ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
- ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© Ù…Ø´Ø±ÙˆØ¹ Ù…Ù†Ø¸Ù…Ø©
- ØªØ­ØªØ§Ø¬ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯
- ØªØ±ÙŠØ¯ ØªÙˆÙ„ÙŠØ¯ Ù‡ÙŠÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

âŒ **Ù„Ø§ ØªØ³ØªØ®Ø¯Ù…Ù‡ Ø¹Ù†Ø¯Ù…Ø§:**
- Ù„Ø¯ÙŠÙƒ Ø®Ø·Ø© Ø¬Ø§Ù‡Ø²Ø© Ø¨Ø§Ù„ÙØ¹Ù„
- ØªØ±ÙŠØ¯ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù…ÙˆØ¬ÙˆØ¯ (Ø§Ø³ØªØ®Ø¯Ù… Code Executor)
- ØªØ­ØªØ§Ø¬ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒÙˆØ¯ (Ø§Ø³ØªØ®Ø¯Ù… QA Agent)

---

### ÙƒÙŠÙ ØªØ­Ø³Ù‘Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø·Ø·ØŸ

1. **Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…Ø­Ø¯Ø¯Ø©:**
   ```python
   # âŒ Ø³ÙŠØ¡
   plan = await planner.analyze_user_request("Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚")
   
   # âœ… Ø¬ÙŠØ¯
   plan = await planner.analyze_user_request(
       "Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ø¹ React Ùˆ Node.jsØŒ "
       "ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ØŒ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù…ØŒ ÙˆØ¥Ø´Ø¹Ø§Ø±Ø§Øª"
   )
   ```

2. **ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø©:**
   ```python
   plan = await planner.analyze_user_request(
       "Ø¨Ù†Ø§Ø¡ REST API Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø§Ø³ØªØ®Ø¯Ù… FastAPI Ùˆ PostgreSQL"
   )
   ```

3. **Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø®Ø·Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°:**
   ```python
   plan = await planner.analyze_user_request(request)
   
   # Ù…Ø±Ø§Ø¬Ø¹Ø©
   print(f"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ø§Ù…: {len(plan['tasks'])}")
   print(f"Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±: {plan['resource_estimate']['total_estimated_hours']}h")
   
   # ØªØ¹Ø¯ÙŠÙ„ Ø¥Ø°Ø§ Ù„Ø²Ù…
   if plan['resource_estimate']['total_estimated_hours'] > 40:
       print("ØªØ­Ø°ÙŠØ±: Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§Ù‹ Ø·ÙˆÙŠÙ„Ø§Ù‹")
   ```

---

### Error Handling

```python
from dev_platform.agents.planner_agent import PlannerAgent

planner = PlannerAgent()

try:
    plan = await planner.analyze_user_request("Ø·Ù„Ø¨ ØºØ§Ù…Ø¶ Ø¬Ø¯Ø§Ù‹")
except Exception as e:
    print(f"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„: {e}")
    # Fallback: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø³ÙŠØ·
    plan = {
        "understanding": "Ù„Ù… Ø£Ø³ØªØ·Ø¹ ÙÙ‡Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¨ÙˆØ¶ÙˆØ­",
        "project_type": "script",
        "technologies": [],
        "tasks": [],
        "next_steps": ["ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª"]
    }
```

---

## ğŸ§ª Testing

### ÙƒÙŠÙ ØªØ®ØªØ¨Ø± PlannerØŸ

#### Unit Tests

```python
import pytest
from dev_platform.agents.planner_agent import PlannerAgent

@pytest.mark.asyncio
async def test_analyze_user_request():
    planner = PlannerAgent()
    
    # Mock model response
    with patch.object(planner.model, 'chat') as mock_chat:
        mock_chat.return_value = {
            "content": json.dumps({
                "understanding": "Test",
                "project_type": "web",
                "technologies": ["react"],
                "tasks": [],
                "structure": {"files": [], "folders": []},
                "next_steps": []
            }),
            "tokens_used": 100
        }
        
        # Test
        result = await planner.analyze_user_request("Build a web app")
        
        assert result['project_type'] == 'web'
        assert 'resource_estimate' in result
```

#### Integration Tests

```python
@pytest.mark.asyncio
async def test_planner_with_ops_coordinator():
    from dev_platform.agents.ops_coordinator_agent import OpsCoordinatorAgent
    from dev_platform.agents.schemas import WorkflowType
    
    coordinator = OpsCoordinatorAgent()
    await coordinator.initialize_async()
    
    # Start workflow
    workflow_id = await coordinator.start_and_execute_workflow_async(
        workflow_type=WorkflowType.DELIVERY_PIPELINE,
        project_name="Test",
        user_request="Build a simple app"
    )
    
    # Wait for completion
    async for update in coordinator.get_progress_stream(workflow_id):
        pass
    
    # Verify
    workflow = await coordinator.storage.get_workflow(workflow_id)
    assert 'project_plan' in workflow
```

---

## ğŸ“– Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„ÙƒØ§Ù…Ù„

### Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ù…ØªØ§Ø­Ø©

#### Async Methods (Public API)

| Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© | Ø§Ù„ÙˆØµÙ | Returns |
|---------|-------|---------|
| `analyze_user_request(request: str)` | ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© | `Dict[str, Any]` |
| `create_task_breakdown(plan: Dict)` | Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù‡Ø§Ù… | `List[Dict]` |
| `estimate_resources_async(tasks: List[Task])` | ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ | `Dict[str, Any]` |
| `generate_project_structure_async(type, techs)` | ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù‡ÙŠÙƒÙ„ | `Dict[str, List[str]]` |

#### Sync Methods (Legacy/Internal)

| Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© | Ø§Ù„ÙˆØµÙ | Returns |
|---------|-------|---------|
| `execute(data: Dict)` | ÙˆØ§Ø¬Ù‡Ø© sync Ù‚Ø¯ÙŠÙ…Ø© | `Dict[str, Any]` |
| `estimate_resources(tasks: List[Task])` | ØªÙ‚Ø¯ÙŠØ± sync | `ResourceEstimate` |
| `generate_project_structure(type, techs)` | ØªÙˆÙ„ÙŠØ¯ sync | `ProjectStructure` |

#### Internal/Helper Methods

| Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© | Ø§Ù„ÙˆØµÙ | Returns |
|---------|-------|---------|
| `_estimate_task_hours(task_desc: str)` | ØªÙ‚Ø¯ÙŠØ± Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø© | `float` |
| `_infer_task_complexity(task: Task)` | Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯ | `str` |
| `_assign_agent_type(task: Task)` | ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„ | `str` |
| `_calculate_critical_path(tasks: List[Task])` | Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø­Ø±Ø¬ | `float` |

---

### Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Schemas

| Schema | Ø§Ù„Ù…ÙˆÙ‚Ø¹ | Ø§Ù„ÙˆØµÙ |
|--------|--------|-------|
| `ProjectPlan` | `dev_platform/agents/schemas.py` | Ø®Ø·Ø© Ù…Ø´Ø±ÙˆØ¹ ÙƒØ§Ù…Ù„Ø© |
| `ResourceEstimate` | `dev_platform/agents/schemas.py` | ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ |
| `ProjectStructure` | `dev_platform/agents/schemas.py` | Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª |
| `Task` | `dev_platform/agents/schemas.py` | Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© |
| `TaskMetadata` | `dev_platform/agents/schemas.py` | Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ù‡Ù…Ø© |

---

## ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ©

**PlannerAgent** Ù‡Ùˆ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ. ÙŠÙˆÙØ±:

âœ… **ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ** Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø´Ø±ÙŠØ©  
âœ… **ØªÙ‚Ø¯ÙŠØ± Ø¯Ù‚ÙŠÙ‚** Ù„Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯  
âœ… **ØªÙ‚Ø³ÙŠÙ… Ù…Ù†Ø·Ù‚ÙŠ** Ù„Ù„Ù…Ù‡Ø§Ù…  
âœ… **ØªÙˆÙ„ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ** Ù„Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹  
âœ… **ØªÙƒØ§Ù…Ù„ Ø³Ù„Ø³** Ù…Ø¹ OpsCoordinator

**Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡:**
1. Ø§Ø³ØªØ®Ø¯Ù… `analyze_user_request()` Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
2. Ø±Ø§Ø¬Ø¹ `resource_estimate` Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡
3. Ø§Ø³ØªØ®Ø¯Ù… `tasks` Ù„Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠ
4. Ø¯Ù…Ø¬ Ù…Ø¹ OpsCoordinator Ù„Ù„Ø£ØªÙ…ØªØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©

---

**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0  
**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 15 Ù†ÙˆÙÙ…Ø¨Ø± 2025  
**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Production Ready (43/43 tests passing)

Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§ØªØŒ Ø±Ø§Ø¬Ø¹:
- `PHASE_3_ROADMAP.md` - Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±
- `dev_platform/agents/planner_agent.py` - Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ
- `tests/unit/test_planner_agent.py` - Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
