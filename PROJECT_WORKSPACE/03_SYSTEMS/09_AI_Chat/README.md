# ğŸ¤– AI Chat System

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

**AI Chat** Ù‡Ùˆ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø°ÙƒÙŠØ© Ø§Ù„ØªÙŠ ØªØªÙŠØ­ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠØ© (AI Agents) Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±ÙŠØ©.

---

## Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª

### 1. Chat Interface
```yaml
Ø§Ù„ØªÙ‚Ù†ÙŠØ©: React + WebSocket + Streaming
Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©: Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ AI
```

**Ø§Ù„Ù…ÙŠØ²Ø§Øª:**
- Real-time messaging Ù…Ø¹ AI Agents
- Streaming responses (Ø§Ù„Ø±Ø¯ÙˆØ¯ ØªØ¸Ù‡Ø± ÙƒÙ„Ù…Ø© Ø¨ÙƒÙ„Ù…Ø©)
- Markdown rendering (Ù„Ù„Ø£ÙƒÙˆØ§Ø¯ ÙˆØ§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ù†Ø³Ù‚Ø©)
- Code syntax highlighting ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
- Copy code snippets
- Export chat history

### 2. Context Management
```yaml
Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©: Ø¥Ø¯Ø§Ø±Ø© Ø³ÙŠØ§Ù‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
```

**Ø§Ù„Ù‚Ø¯Ø±Ø§Øª:**
- ØªØªØ¨Ø¹ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø£ÙŠ Ù…Ø´Ø±ÙˆØ¹ØŒ Ø£ÙŠ Ù…Ù„Ù)
- Ø­ÙØ¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
- Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
- Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚

### 3. Multi-Agent Orchestration
```yaml
Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©: Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø¨ÙŠÙ† Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
```

**Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡:**
- **Infrastructure Agents** (6 ÙˆÙƒÙ„Ø§Ø¡):
  - Server Setup Agent
  - Security Hardening Agent
  - Monitoring Setup Agent
  - Backup Agent
  - Deployment Agent
  - Maintenance Agent

- **Development Agents** (4 ÙˆÙƒÙ„Ø§Ø¡):
  - Frontend Developer Agent
  - Backend Developer Agent
  - DevOps Agent
  - QA/Testing Agent

### 4. Command Palette
```yaml
Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©: Ø§Ø®ØªØµØ§Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
```

**Ø§Ù„Ø£ÙˆØ§Ù…Ø±:**
- `/create-project <type>` - Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯
- `/deploy` - Ù†Ø´Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
- `/test` - ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
- `/debug <issue>` - ØªØµØ­ÙŠØ­ Ù…Ø´ÙƒÙ„Ø©
- `/optimize` - ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙƒÙˆØ¯

---

## Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

```
src/components/features/AIChat/
â”œâ”€â”€ ChatInterface.tsx        # Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”œâ”€â”€ MessageList.tsx          # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
â”œâ”€â”€ MessageInput.tsx         # Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
â”œâ”€â”€ AgentSelector.tsx        # Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙƒÙŠÙ„
â”œâ”€â”€ ContextPanel.tsx         # Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø­Ø§Ù„ÙŠ
â”œâ”€â”€ CommandPalette.tsx       # Ù„ÙˆØ­Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø±
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useChat.ts           # Hook Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
â”‚   â”œâ”€â”€ useAgentStream.ts    # Hook Ù„Ù€ streaming responses
â”‚   â””â”€â”€ useContext.ts        # Hook Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ§Ù‚
â””â”€â”€ utils/
    â”œâ”€â”€ messageParser.ts     # ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
    â””â”€â”€ codeExtractor.ts     # Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ù…Ù† Ø§Ù„Ø±Ø¯ÙˆØ¯
```

---

## Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø£Ø®Ø±Ù‰

### Ù…Ø¹ Code Editor:
```typescript
// AI ÙŠÙƒØªØ¨ ÙƒÙˆØ¯ ÙˆÙŠØ±Ø³Ù„Ù‡ Ù„Ù„Ù€ Editor
import { useCodeEditor } from '@/hooks/useCodeEditor'
import { useChat } from '@/hooks/useChat'

const { sendMessage } = useChat()
const { insertCode } = useCodeEditor()

// User: "Ø£Ù†Ø´Ø¦ Ù…ÙƒÙˆÙ† React Ù„Ù„Ù€ Login"
sendMessage("Ø£Ù†Ø´Ø¦ Ù…ÙƒÙˆÙ† React Ù„Ù„Ù€ Login")
  .then((response) => {
    // AI ÙŠØ±Ø¯ Ø¨ÙƒÙˆØ¯
    if (response.containsCode) {
      insertCode(response.extractedCode)
    }
  })
```

### Ù…Ø¹ File Manager:
```typescript
// AI ÙŠØ·Ù„Ø¨ Ù…Ù„Ù Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
const { sendMessage, setContext } = useChat()
const { getFileContent } = useFileManager()

// AI: "Ø§Ø¹Ø±Ø¶ Ù„ÙŠ Ù…Ù„Ù package.json"
const file = await getFileContent('package.json')
setContext({ currentFile: file })
```

### Ù…Ø¹ Remote Execution:
```typescript
// AI ÙŠÙ‚ØªØ±Ø­ ØªØ´ØºÙŠÙ„ Ø£Ù…Ø±
import { useRemoteExecution } from '@/hooks/useRemoteExecution'

const { runCommand } = useRemoteExecution()

// AI: "Ø¬Ø±Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø±: npm test"
const handleAICommand = async (command: string) => {
  const result = await runCommand(command)
  // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„Ù€ AI Ù„Ù„ØªØ­Ù„ÙŠÙ„
  sendMessage(`Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${result.output}`)
}
```

### Ù…Ø¹ Agents System:
```typescript
// ØªÙÙˆÙŠØ¶ Ù…Ù‡Ù…Ø© Ù„ÙˆÙƒÙŠÙ„ Ù…Ø¹ÙŠÙ†
import { useAgentOrchestration } from '@/hooks/useAgents'

const { delegateTask } = useAgentOrchestration()

// User: "Ù‚Ù… Ø¨ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"
const result = await delegateTask({
  agent: 'backend_developer',
  task: 'optimize database queries',
  context: { project: currentProject }
})
```

---

## Ø§Ù„Ù…Ù‡Ø§Ù… Ø°Ø§Øª Ø§Ù„ØµÙ„Ø©

- Ø§Ù„Ù…Ø·ÙˆØ± 8: AI Chat Interface
- Ø§Ù„Ù…Ø·ÙˆØ± 1: Infrastructure Agents
- Ø§Ù„Ù…Ø·ÙˆØ± 2: Development Agents
- Ø§Ù„Ù…Ø·ÙˆØ± 7: Code Editor Integration

---

## Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

**Ù…Ø§ Ù‡Ùˆ Ù…ÙˆØ¬ÙˆØ¯:**
- âŒ Ù„Ø§ Ø´ÙŠØ¡ Ø¨Ø¹Ø¯ - ÙŠØ¬Ø¨ Ø¨Ù†Ø§Ø¡ ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ù† Ø§Ù„ØµÙØ±

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**
- [ ] Chat UI components
- [ ] WebSocket connection Ù„Ù„Ù€ real-time messaging
- [ ] Streaming response handler
- [ ] Markdown renderer Ù…Ø¹ syntax highlighting
- [ ] Context management system
- [ ] Agent selector
- [ ] Command palette
- [ ] Chat history storage
- [ ] Export/Import conversations
- [ ] Code extraction Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„

---

## Ø§Ù„ØªÙˆØ³Ø¹Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### Ù…Ø«Ø§Ù„: Chat Interface Component

```typescript
// components/features/AIChat/ChatInterface.tsx

import { useState, useRef, useEffect } from 'react'
import { useChat } from '@/hooks/useChat'
import MessageList from './MessageList'
import MessageInput from './MessageInput'
import AgentSelector from './AgentSelector'

export default function ChatInterface() {
  const {
    messages,
    sendMessage,
    isTyping,
    currentAgent,
    setAgent
  } = useChat()

  return (
    <div className="flex flex-col h-full bg-gray-900">
      {/* Header */}
      <div className="bg-gray-800 p-4 border-b border-gray-700">
        <AgentSelector
          currentAgent={currentAgent}
          onSelectAgent={setAgent}
        />
      </div>

      {/* Messages */}
      <div className="flex-1 overflow-y-auto p-4">
        <MessageList messages={messages} isTyping={isTyping} />
      </div>

      {/* Input */}
      <div className="bg-gray-800 p-4 border-t border-gray-700">
        <MessageInput onSend={sendMessage} />
      </div>
    </div>
  )
}
```

### Ù…Ø«Ø§Ù„: Streaming Response Hook

```typescript
// hooks/useAgentStream.ts

import { useState, useEffect } from 'react'

export function useAgentStream(agentId: string) {
  const [streamedText, setStreamedText] = useState('')
  const [isStreaming, setIsStreaming] = useState(false)

  const streamResponse = async (message: string) => {
    setIsStreaming(true)
    setStreamedText('')

    const response = await fetch('/api/ai/stream', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ agent: agentId, message })
    })

    const reader = response.body?.getReader()
    const decoder = new TextDecoder()

    if (!reader) return

    while (true) {
      const { done, value } = await reader.read()
      if (done) break

      const chunk = decoder.decode(value)
      setStreamedText((prev) => prev + chunk)
    }

    setIsStreaming(false)
  }

  return { streamedText, isStreaming, streamResponse }
}
```

### Ù…Ø«Ø§Ù„: Code Extraction Utility

```typescript
// utils/codeExtractor.ts

export function extractCodeBlocks(text: string) {
  const codeBlockRegex = /```(\w+)?\n([\s\S]*?)```/g
  const blocks: Array<{ language: string; code: string }> = []

  let match
  while ((match = codeBlockRegex.exec(text)) !== null) {
    blocks.push({
      language: match[1] || 'text',
      code: match[2].trim()
    })
  }

  return blocks
}

export function extractInlineCode(text: string) {
  const inlineCodeRegex = /`([^`]+)`/g
  const codes: string[] = []

  let match
  while ((match = inlineCodeRegex.exec(text)) !== null) {
    codes.push(match[1])
  }

  return codes
}
```

### Ù…Ø«Ø§Ù„: Command Palette

```typescript
// components/features/AIChat/CommandPalette.tsx

const COMMANDS = [
  {
    command: '/create-project',
    description: 'Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯',
    args: ['<type>'],
    example: '/create-project react'
  },
  {
    command: '/deploy',
    description: 'Ù†Ø´Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ',
    args: [],
    example: '/deploy'
  },
  {
    command: '/test',
    description: 'ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª',
    args: ['<file>?'],
    example: '/test auth.test.ts'
  }
]

export default function CommandPalette({ onSelect }: Props) {
  const [search, setSearch] = useState('')

  const filtered = COMMANDS.filter(cmd =>
    cmd.command.includes(search) || cmd.description.includes(search)
  )

  return (
    <div className="bg-gray-800 rounded p-4">
      <input
        type="text"
        placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ù…Ø±..."
        value={search}
        onChange={(e) => setSearch(e.target.value)}
        className="w-full bg-gray-700 px-3 py-2 rounded"
      />
      
      <div className="mt-4 space-y-2">
        {filtered.map((cmd) => (
          <button
            key={cmd.command}
            onClick={() => onSelect(cmd.command)}
            className="w-full text-left px-3 py-2 hover:bg-gray-700 rounded"
          >
            <div className="font-mono text-blue-400">{cmd.command}</div>
            <div className="text-sm text-gray-400">{cmd.description}</div>
            <div className="text-xs text-gray-500">Ù…Ø«Ø§Ù„: {cmd.example}</div>
          </button>
        ))}
      </div>
    </div>
  )
}
```

---

## Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©

### 1. Streaming Performance
```typescript
// Ø­Ù„: Debouncing Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
import { useDebouncedCallback } from 'use-debounce'

const updateUI = useDebouncedCallback((text) => {
  setDisplayedText(text)
}, 50)
```

### 2. Context Window Management
```typescript
// Ø­Ù„: Sliding window Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
const MAX_CONTEXT_MESSAGES = 20

const getRelevantContext = (messages: Message[]) => {
  return messages.slice(-MAX_CONTEXT_MESSAGES)
}
```

### 3. Multi-Agent Coordination
```typescript
// Ø­Ù„: Agent Router
const routeToAgent = (message: string) => {
  if (message.includes('deploy') || message.includes('Ù†Ø´Ø±')) {
    return 'devops_agent'
  }
  if (message.includes('test') || message.includes('Ø§Ø®ØªØ¨Ø§Ø±')) {
    return 'qa_agent'
  }
  // Default
  return 'general_agent'
}
```

---

## Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø°Ø§Øª Ø§Ù„ØµÙ„Ø©

- [`../01_ARCHITECTURE/SYSTEM_OVERVIEW.md`](../../01_ARCHITECTURE/SYSTEM_OVERVIEW.md)
- [`../03_SYSTEMS/01_Agents/README.md`](../01_Agents/README.md)
- [`../05_OPERATIONS/AGENT_TASKS/DEVELOPER_08.md`](../../05_OPERATIONS/AGENT_TASKS/DEVELOPER_08.md)

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«**: 2025-11-18  
**Ø§Ù„Ø­Ø§Ù„Ø©**: âœ… Ù…ÙˆØ«Ù‚
