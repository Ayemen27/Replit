# سجل التغييرات المعمارية (Architecture Changelog)

## الغرض
هذا الملف يتتبع جميع القرارات المعمارية والتغييرات الهيكلية المهمة في المشروع.

---

## [إصدار] - YYYY-MM-DD

### إضافات (Added)
- **مكون جديد**: [اسم المكون]
  - **السبب**: [لماذا أُضيف]
  - **التأثير**: [كيف يؤثر على النظام]
  - **المستندات**: [رابط للوثائق]

### تغييرات (Changed)
- **تعديل**: [ما تم تعديله]
  - **من**: [الحالة القديمة]
  - **إلى**: [الحالة الجديدة]
  - **السبب**: [لماذا التغيير]
  - **Breaking Change**: نعم/لا

### إزالات (Removed)
- **إزالة**: [ما تم إزالته]
  - **السبب**: [لماذا أُزيل]
  - **البديل**: [الحل البديل]
  - **Migration**: [خطوات الترحيل]

### إهمالات (Deprecated)
- **مُهمل**: [ما سيُزال مستقبلاً]
  - **تاريخ الإزالة المتوقع**: YYYY-MM-DD
  - **البديل**: [الحل الموصى به]

---

## أمثلة

### [2.0.0] - 2025-11-18

#### Added
- **نظام إدارة Docker**
  - السبب: دعم بيئات معزولة للمستخدمين
  - التأثير: تحسين الأمان والعزل
  - المستندات: [03_SYSTEMS/04_Docker_Management/](../03_SYSTEMS/04_Docker_Management/)

#### Changed
- **GraphQL API من v4 إلى v5**
  - من: Apollo Server v4
  - إلى: Apollo Server v5
  - السبب: تحسينات الأداء ودعم أفضل للـ Subscriptions
  - Breaking Change: نعم - تغييرات في Schema definitions

#### Removed
- **Firebase Authentication**
  - السبب: استبداله بـ NextAuth للتحكم الكامل
  - البديل: NextAuth + JWT
  - Migration: راجع [docs/auth-migration.md]

#### Deprecated
- **REST API v1**
  - تاريخ الإزالة: 2025-12-31
  - البديل: GraphQL API أو REST API v2

---

### [1.5.0] - 2025-10-15

#### Added
- **Bridge Tool للمزامنة**
  - السبب: الحاجة لمزامنة بين Replit والسيرفر
  - المستندات: [02_INTEGRATION_PLAN/BRIDGE_TOOL.md](../02_INTEGRATION_PLAN/BRIDGE_TOOL.md)

---

## القرارات المعمارية المهمة (ADRs)

### ADR-001: استخدام Control Plane Architecture
- **التاريخ**: 2025-11-18
- **القرار**: المنصة لا تستضيف workloads، فقط واجهة تحكم
- **السبب**: تقليل التكاليف وتحسين القابلية للتوسع
- **البدائل المُعتبرة**: 
  - Full hosting (مُستبعد: تكلفة عالية)
  - Hybrid (مُستبعد: تعقيد زائد)
- **العواقب**: 
  - ✅ تكلفة ثابتة ومنخفضة
  - ❌ المستخدمين يحتاجون VPS خاص

### ADR-002: استخدام LocalAI بدلاً من OpenAI
- **التاريخ**: 2025-11-10
- **القرار**: استخدام نماذج AI محلية على VPS المستخدم
- **السبب**: تقليل التكاليف وتحسين الخصوصية
- **البدائل المُعتبرة**:
  - OpenAI API (مُستبعد: تكلفة $0.01-0.06 لكل request)
  - Google Gemini (مُستبعد: حدود API)
- **العواقب**:
  - ✅ مجاني تماماً
  - ✅ خصوصية كاملة
  - ❌ جودة أقل قليلاً
  - ❌ يحتاج موارد على VPS

---

## إرشادات المساهمة

عند إضافة تغيير معماري:

1. **أضف في القسم الصحيح** (Added/Changed/Removed/Deprecated)
2. **اشرح السبب** بوضوح
3. **وثّق التأثير** على المكونات الأخرى
4. **أضف روابط** للوثائق ذات الصلة
5. **حدّث التاريخ** والإصدار

---

**آخر تحديث**: 2025-11-18  
**المسؤول**: Architecture Team
