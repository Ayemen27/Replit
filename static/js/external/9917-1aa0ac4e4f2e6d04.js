try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fe806112-7975-45fc-b5ab-4e6a515291db",e._sentryDebugIdIdentifier="sentry-dbid-fe806112-7975-45fc-b5ab-4e6a515291db")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9917],{9637:(e,t,r)=>{r.d(t,{KS:()=>H,eU:()=>D});var i,n,s,o,a,l,u,c,f,h,g,d,y={},p={exports:{}};function m(){return d||(d=1,function(e,t){let{hasOwnProperty:r}=Object.prototype,i=h();i.configure=h,i.stringify=i,i.default=i,t.stringify=i,t.configure=h,e.exports=i;let n=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function s(e){return e.length<5e3&&!n.test(e)?`"${e}"`:JSON.stringify(e)}function o(e,t){if(e.length>200||t)return e.sort(t);for(let t=1;t<e.length;t++){let r=e[t],i=t;for(;0!==i&&e[i-1]>r;)e[i]=e[i-1],i--;e[i]=r}return e}let a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(e){return void 0!==a.call(e)&&0!==e.length}function u(e,t,r){e.length<r&&(r=e.length);let i=","===t?"":" ",n=`"0":${i}${e[0]}`;for(let s=1;s<r;s++)n+=`${t}"${s}":${i}${e[s]}`;return n}function c(e,t){let i;if(r.call(e,t)){if("number"!=typeof(i=e[t]))throw TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(i))throw TypeError(`The "${t}" argument must be an integer`);if(i<1)throw RangeError(`The "${t}" argument must be >= 1`)}return void 0===i?1/0:i}function f(e){return 1===e?"1 item":`${e} items`}function h(e){let t=function(e){if(r.call(e,"strict")){let t=e.strict;if("boolean"!=typeof t)throw TypeError('The "strict" argument must be of type boolean');if(t)return e=>{let t=`Object can not safely be stringified. Received type ${typeof e}`;throw"function"!=typeof e&&(t+=` (${e.toString()})`),Error(t)}}}(e={...e});t&&(void 0===e.bigint&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let i=function(e){if(r.call(e,"circularValue")){let t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw TypeError("Converting circular structure to JSON")}};throw TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(e),n=function(e,t){let i;if(r.call(e,t)&&"boolean"!=typeof(i=e[t]))throw TypeError(`The "${t}" argument must be of type boolean`);return void 0===i||i}(e,"bigint"),a=function(e){let t;if(r.call(e,"deterministic")&&"boolean"!=typeof(t=e.deterministic)&&"function"!=typeof t)throw TypeError('The "deterministic" argument must be of type boolean or comparator function');return void 0===t||t}(e),h="function"==typeof a?a:void 0,g=c(e,"maximumDepth"),d=c(e,"maximumBreadth");return function(e,r,c){if(arguments.length>1){let y="";if("number"==typeof c?y=" ".repeat(Math.min(c,10)):"string"==typeof c&&(y=c.slice(0,10)),null!=r){if("function"==typeof r)return function e(r,u,c,y,p,m){let v=u[r];switch("object"==typeof v&&null!==v&&"function"==typeof v.toJSON&&(v=v.toJSON(r)),typeof(v=y.call(u,r,v))){case"string":return s(v);case"object":{if(null===v)return"null";if(-1!==c.indexOf(v))return i;let t="",r=",",n=m;if(Array.isArray(v)){if(0===v.length)return"[]";if(g<c.length+1)return'"[Array]"';c.push(v),""!==p&&(m+=p,t+=`
${m}`,r=`,
${m}`);let i=Math.min(v.length,d),s=0;for(;s<i-1;s++){let i=e(String(s),v,c,y,p,m);t+=void 0!==i?i:"null",t+=r}let o=e(String(s),v,c,y,p,m);if(t+=void 0!==o?o:"null",v.length-1>d){let e=v.length-d-1;t+=`${r}"... ${f(e)} not stringified"`}return""!==p&&(t+=`
${n}`),c.pop(),`[${t}]`}let u=Object.keys(v),b=u.length;if(0===b)return"{}";if(g<c.length+1)return'"[Object]"';let w="",S="";""!==p&&(m+=p,r=`,
${m}`,w=" ");let k=Math.min(b,d);a&&!l(v)&&(u=o(u,h)),c.push(v);for(let i=0;i<k;i++){let n=u[i],o=e(n,v,c,y,p,m);void 0!==o&&(t+=`${S}${s(n)}:${w}${o}`,S=r)}return b>d&&(t+=`${S}"...":${w}"${f(b-d)} not stringified"`,S=r),""!==p&&S.length>1&&(t=`
${m}${t}
${n}`),c.pop(),`{${t}}`}case"number":return isFinite(v)?String(v):t?t(v):"null";case"boolean":return!0===v?"true":"false";case"undefined":return;case"bigint":if(n)return String(v);default:return t?t(v):void 0}}("",{"":e},[],r,y,"");if(Array.isArray(r))return function e(r,o,a,l,u,c){switch("object"==typeof o&&null!==o&&"function"==typeof o.toJSON&&(o=o.toJSON(r)),typeof o){case"string":return s(o);case"object":{if(null===o)return"null";if(-1!==a.indexOf(o))return i;let t=c,r="",n=",";if(Array.isArray(o)){if(0===o.length)return"[]";if(g<a.length+1)return'"[Array]"';a.push(o),""!==u&&(c+=u,r+=`
${c}`,n=`,
${c}`);let i=Math.min(o.length,d),s=0;for(;s<i-1;s++){let t=e(String(s),o[s],a,l,u,c);r+=void 0!==t?t:"null",r+=n}let h=e(String(s),o[s],a,l,u,c);if(r+=void 0!==h?h:"null",o.length-1>d){let e=o.length-d-1;r+=`${n}"... ${f(e)} not stringified"`}return""!==u&&(r+=`
${t}`),a.pop(),`[${r}]`}a.push(o);let h="";""!==u&&(c+=u,n=`,
${c}`,h=" ");let y="";for(let t of l){let i=e(t,o[t],a,l,u,c);void 0!==i&&(r+=`${y}${s(t)}:${h}${i}`,y=n)}return""!==u&&y.length>1&&(r=`
${c}${r}
${t}`),a.pop(),`{${r}}`}case"number":return isFinite(o)?String(o):t?t(o):"null";case"boolean":return!0===o?"true":"false";case"undefined":return;case"bigint":if(n)return String(o);default:return t?t(o):void 0}}("",e,[],function(e){let t=new Set;for(let r of e)("string"==typeof r||"number"==typeof r)&&t.add(String(r));return t}(r),y,"")}if(0!==y.length)return function e(r,c,y,p,m){switch(typeof c){case"string":return s(c);case"object":{if(null===c)return"null";if("function"==typeof c.toJSON){if("object"!=typeof(c=c.toJSON(r)))return e(r,c,y,p,m);if(null===c)return"null"}if(-1!==y.indexOf(c))return i;let t=m;if(Array.isArray(c)){if(0===c.length)return"[]";if(g<y.length+1)return'"[Array]"';y.push(c),m+=p;let r=`
${m}`,i=`,
${m}`,n=Math.min(c.length,d),s=0;for(;s<n-1;s++){let t=e(String(s),c[s],y,p,m);r+=void 0!==t?t:"null",r+=i}let o=e(String(s),c[s],y,p,m);if(r+=void 0!==o?o:"null",c.length-1>d){let e=c.length-d-1;r+=`${i}"... ${f(e)} not stringified"`}return r+=`
${t}`,y.pop(),`[${r}]`}let n=Object.keys(c),v=n.length;if(0===v)return"{}";if(g<y.length+1)return'"[Object]"';m+=p;let b=`,
${m}`,w="",S="",k=Math.min(v,d);l(c)&&(w+=u(c,b,d),n=n.slice(c.length),k-=c.length,S=b),a&&(n=o(n,h)),y.push(c);for(let t=0;t<k;t++){let r=n[t],i=e(r,c[r],y,p,m);void 0!==i&&(w+=`${S}${s(r)}: ${i}`,S=b)}return v>d&&(w+=`${S}"...": "${f(v-d)} not stringified"`,S=b),""!==S&&(w=`
${m}${w}
${t}`),y.pop(),`{${w}}`}case"number":return isFinite(c)?String(c):t?t(c):"null";case"boolean":return!0===c?"true":"false";case"undefined":return;case"bigint":if(n)return String(c);default:return t?t(c):void 0}}("",e,[],y,"")}return function e(r,c,y){switch(typeof c){case"string":return s(c);case"object":{if(null===c)return"null";if("function"==typeof c.toJSON){if("object"!=typeof(c=c.toJSON(r)))return e(r,c,y);if(null===c)return"null"}if(-1!==y.indexOf(c))return i;let t="",n=void 0!==c.length;if(n&&Array.isArray(c)){if(0===c.length)return"[]";if(g<y.length+1)return'"[Array]"';y.push(c);let r=Math.min(c.length,d),i=0;for(;i<r-1;i++){let r=e(String(i),c[i],y);t+=void 0!==r?r:"null",t+=","}let n=e(String(i),c[i],y);if(t+=void 0!==n?n:"null",c.length-1>d){let e=c.length-d-1;t+=`,"... ${f(e)} not stringified"`}return y.pop(),`[${t}]`}let p=Object.keys(c),m=p.length;if(0===m)return"{}";if(g<y.length+1)return'"[Object]"';let v="",b=Math.min(m,d);n&&l(c)&&(t+=u(c,",",d),p=p.slice(c.length),b-=c.length,v=","),a&&(p=o(p,h)),y.push(c);for(let r=0;r<b;r++){let i=p[r],n=e(i,c[i],y);void 0!==n&&(t+=`${v}${s(i)}:${n}`,v=",")}return m>d&&(t+=`${v}"...":"${f(m-d)} not stringified"`),y.pop(),`{${t}}`}case"number":return isFinite(c)?String(c):t?t(c):"null";case"boolean":return!0===c?"true":"false";case"undefined":return;case"bigint":if(n)return String(c);default:return t?t(c):void 0}}("",e,[])}}}(p,p.exports)),p.exports}function v(){if(S)return w;function e(e){return e*Math.random()|0}return S=1,w={findNotMatching:function(e,t){let r=[],i=0;for(let n=0;n<e.length;n++)for(let s=i;s<t.length;s++)e[n]!==t[s]&&(r.push(t[s]),i=s+1);return r},findMatchingIndexes:function(e,t){let r=[],i=0;for(let n=0;n<e.length;n++)for(let s=i;s<t.length;s++)e[n]===t[s]&&(r.push(s),i=s+1);return r},bsearchIndex:function(e,t){let r=0,i=e.length-1;for(;r<=i;){let n=(r+i)/2|0;if(e[n]===t)return n;e[n]<t?r=n+1:i=n-1}return -1},wildcardMatch:function(e,t){if("*"===e||e.length===t.length&&e===t)return!0;let r=0,i=0;for(;r<e.length&&i<t.length;){if(e[r]===t[i]){r++,i++;continue}if("*"===e[r]){if(e[r+1]===t[i]){r++;continue}i++;continue}return!1}return r>=e.length-1},randomSubset:function(t,r){var i,n;if(t.length<1||r<1)return[];let s=(i=1,n=Math.min(t.length,r),(i=Math.floor(i))+e(1+(n=Math.floor(n))-i)),o=new Set;for(let r=0;r<s;r++)o.add(e(t.length));let a=[];for(let e of o)a.push(t[e]);return a},abstractLogging:function(){let e=()=>{};return{fatal:e,error:e,warn:e,info:e,debug:e,trace:e}},isServerSide:typeof window>"u"}}function b(){if(E)return k;E=1;class e{constructor(e){this.options=e}async get(e){throw Error("storage get method not implemented")}async set(e,t,r,i){throw Error("storage set method not implemented")}async remove(e){throw Error("storage remove method not implemented")}async invalidate(e){throw Error("storage invalidate method not implemented")}async clear(e){throw Error("storage clear method not implemented")}async refresh(){throw Error("storage refresh method not implemented")}}return k=e}var w,S,k,E,$,R,A,O,T,_={};function K(){if(x)return M;x=1;var e=(T||(T=1,_.ARRAY_BUFFER_SUPPORT="u">typeof ArrayBuffer,_.SYMBOL_SUPPORT="u">typeof Symbol),_),t=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;return M=function(e,i){var n,s,o,a,l;if(!e)throw Error("obliterator/forEach: invalid iterable.");if("function"!=typeof i)throw Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||t&&ArrayBuffer.isView(e)||"string"==typeof e||"[object Arguments]"===e.toString()){for(o=0,a=e.length;o<a;o++)i(e[o],o);return}if("function"==typeof e.forEach)return void e.forEach(i);if(r&&Symbol.iterator in e&&"function"!=typeof e.next&&(e=e[Symbol.iterator]()),"function"==typeof e.next){for(n=e,o=0;!0!==(l=n.next()).done;)i(l.value,o),o++;return}for(s in e)e.hasOwnProperty(s)&&i(e[s],s)}}var M,x,j,z={};function L(){var e;return j||(j=1,z.getPointerArray=function(e){var t=e-1;if(t<=255)return Uint8Array;if(t<=65535)return Uint16Array;if(t<=0xffffffff)return Uint32Array;throw Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},z.getSignedPointerArray=function(e){var t=e-1;return t<=127?Int8Array:t<=32767?Int16Array:t<=0x7fffffff?Int32Array:Float64Array},z.getNumberType=function(e){return e===(0|e)?-1===Math.sign(e)?e<=127&&e>=-128?Int8Array:e<=32767&&e>=-32768?Int16Array:Int32Array:e<=255?Uint8Array:e<=65535?Uint16Array:Uint32Array:Float64Array},e={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8},z.getMinimalRepresentation=function(t,r){var i,n,s,o,a,l=null,u=0;for(o=0,a=t.length;o<a;o++)s=r?r(t[o]):t[o],(i=e[(n=z.getNumberType(s)).name])>u&&(u=i,l=n);return l},z.isTypedArray=function(e){return"u">typeof ArrayBuffer&&ArrayBuffer.isView(e)},z.concat=function(){var e,t,r,i=0;for(e=0,r=arguments.length;e<r;e++)i+=arguments[e].length;var n=new arguments[0].constructor(i);for(e=0,t=0;e<r;e++)n.set(arguments[e],t),t+=arguments[e].length;return n},z.indices=function(e){for(var t=z.getPointerArray(e),r=new t(e),i=0;i<e;i++)r[i]=i;return r}),z}var N,P={};function I(){let e;if(l)return a;l=1;let{isServerSide:t}=v();t&&(e=function(){if(R)return $;R=1;let e=m(),t=b(),{findNotMatching:r,randomSubset:i,abstractLogging:n}=v();class s extends t{constructor(e={}){if(!e.client||"object"!=typeof e.client)throw Error("Redis client is required");if(super(e),e.invalidation&&e.invalidation.referencesTTL&&("number"!=typeof e.invalidation.referencesTTL||e.invalidation.referencesTTL<1))throw Error("invalidation.referencesTTL must be a positive integer greater than 1");this.log=e.log||n(),this.store=e.client,this.invalidation=!!e.invalidation,this.referencesTTL=e.invalidation&&e.invalidation.referencesTTL||60}getReferenceKeyLabel(e){return`r:${e}`}getKeyReferenceLabel(e){return`k:${e}`}async get(e){this.log.debug({msg:"acd/storage/redis.get",key:e});try{let t=await this.store.get(e);if(!t){if(!this.invalidation)return;this.clearReferences(e);return}return JSON.parse(t)}catch(t){this.log.error({msg:"acd/storage/redis.get error",err:t,key:e})}}async getTTL(e){this.log.debug({msg:"acd/storage/memory.getTTL",key:e});let t=await this.store.pttl(e);return t<0?0:t=Math.ceil(t/1e3)}async set(t,i,n,s){if(this.log.debug({msg:"acd/storage/redis.set key",key:t,value:i,ttl:n,references:s}),!(!(n=Number(n))||n<0))try{if(await this.store.set(t,e(i),"EX",n),!s||s.length<1)return;if(!this.invalidation)return void this.log.warn({msg:"acd/storage/redis.set, invalidation is disabled, references are useless",key:t,references:s});let o=[],a=await this.store.smembers(this.getKeyReferenceLabel(t));if(this.log.debug({msg:"acd/storage/redis.set current references",key:t,currentReferences:a}),a.length>1){for(let e of(a.sort(),s.sort(),r(s,a)))o.push(["srem",this.getReferenceKeyLabel(e),t]);o.push(["del",this.getKeyReferenceLabel(t)])}let l=a.length>1?r(a,s):s;this.log.debug({msg:"acd/storage/redis.set references to add",key:t,referencesToAdd:l});for(let e=0;e<l.length;e++){let r=l[e],i=this.getReferenceKeyLabel(r);o.push(["sadd",i,t]),o.push(["expire",i,this.referencesTTL])}let u=this.getKeyReferenceLabel(t);o.push(["sadd",u,s]),o.push(["expire",u,n]),this.log.debug({msg:"acd/storage/redis.set references writes",writes:o}),await this.store.pipeline(o).exec()}catch(e){this.log.error({msg:"acd/storage/redis.set error",err:e,key:t,ttl:n,references:s})}}async remove(e){this.log.debug({msg:"acd/storage/redis.remove",key:e});try{let t=await this.store.del(e)>0;return t&&this.invalidation&&await this.clearReferences(e),t}catch(t){this.log.error({msg:"acd/storage/redis.remove error",err:t,key:e})}}async invalidate(e){if(!this.invalidation)return this.log.warn({msg:"acd/storage/redis.invalidate, exit due invalidation is disabled"}),[];this.log.debug({msg:"acd/storage/redis.invalidate",references:e});try{return Array.isArray(e)?await this._invalidateReferences(e):await this._invalidateReference(e)}catch(t){return this.log.error({msg:"acd/storage/redis.invalidate error",err:t,references:e}),[]}}async _invalidateReferences(e,t=!0){let r=e.map(e=>["smembers",t?this.getReferenceKeyLabel(e):e]),i=await this.store.pipeline(r).exec();this.log.debug({msg:"acd/storage/redis._invalidateReferences keys",keys:i});let n=[],s=[];for(let e=0;e<i.length;e++){let t=i[e][1];if(t){this.log.debug({msg:"acd/storage/redis._invalidateReferences got keys to be invalidated",keys:t});for(let e=0;e<t.length;e++){let r=t[e];this.log.debug({msg:"acd/storage/redis._invalidateReferences del key"+r}),s.push(r),n.push(["del",r])}}}return await this.store.pipeline(n).exec(),await this.clearReferences(s),s}async _invalidateReference(e){let t;if(e.includes("*")){let t=await this.store.keys(this.getReferenceKeyLabel(e));return this._invalidateReferences(t,!1)}t=await this.store.smembers(this.getReferenceKeyLabel(e)),this.log.debug({msg:"acd/storage/redis._invalidateReference keys",keys:t});let r=[],i=[];for(let e=0;e<t.length;e++){let n=t[e];this.log.debug({msg:"acd/storage/redis._invalidateReference del key"+n}),i.push(n),r.push(["del",n])}return await this.store.pipeline(r).exec(),await this.clearReferences(i),i}async clear(e){this.log.debug({msg:"acd/storage/redis.clear",name:e});try{if(!e)return void await this.store.flushall();let t=await this.store.keys(`${e}*`);this.log.debug({msg:"acd/storage/redis.clear keys",keys:t});let r=t.map(e=>["del",e]);if(await this.store.pipeline(r).exec(),!this.invalidation)return;await this.clearReferences(t)}catch(t){this.log.error({msg:"acd/storage/redis.clear error",err:t,name:e})}}async refresh(){try{await this.store.flushall()}catch(e){this.log.error({msg:"acd/storage/redis.refresh error",err:e})}}async clearReferences(e){try{if(!e)return void this.log.warn({msg:"acd/storage/redis.clearReferences invalid call due to empty key"});Array.isArray(e)||(e=[e]);let t=e.map(e=>["smembers",this.getKeyReferenceLabel(e)]),r=await this.store.pipeline(t).exec();this.log.debug({msg:"acd/storage/redis.clearReferences references",keys:e,referencesKeys:r});let i={};for(let t=0;t<e.length;t++){for(let n=0;n<r[t][1].length;n++){let s=this.getReferenceKeyLabel(r[t][1][n]);i[s]||(i[s]=["srem",s,e])}let n=this.getKeyReferenceLabel(e[t]);i[n]=["del",n]}this.log.debug({msg:"acd/storage/redis.clearReferences writes pipeline",writes:i}),await this.store.pipeline(Object.values(i)).exec()}catch(e){this.log.error({msg:"acd/storage/redis.clearReferences error",err:e})}}async gc(e="lazy",t={}){if(this.log.debug({msg:"acd/storage/redis.gc",mode:e,options:t}),!this.invalidation)return void this.log.warn({msg:"acd/storage/redis.gc does not run due to invalidation is disabled"});"strict"!==e&&"lazy"!==e&&(e="lazy");let r={references:{scanned:[],removed:[]},keys:{scanned:new Set,removed:new Set},loops:0,cursor:0,error:null};try{let n=0,s=64;if(t.chunk&&("number"!=typeof t.chunk||t.chunk<1))return r.error=Error("chunk must be a positive integer greater than 1"),r;if(t.lazy){if(t.lazy.chunk){if("number"!=typeof t.lazy.chunk||t.lazy.chunk<1)return r.error=Error("lazy.chunk must be a positive integer greater than 1"),r;s=t.lazy.chunk}if(t.lazy.cursor){if("number"!=typeof t.lazy.cursor||t.lazy.cursor<0)return r.error=Error("lazy.cursor must be a positive integer greater than 0"),r;n=t.lazy.cursor}}let o=t.chunk||64,a=Math.min(s,o),l=n,u=-1,c=-1;do{r.loops++;let t=await this.store.scan(n,"match","r:*","count",a);n=Number(t[0]),u=t[1].length;let o="lazy"===e?i(t[1],s):t[1];r.references.scanned=r.references.scanned.concat(o);let l=[];for(let e=0;e<o.length;e++){let t=o[e];l.push(["smembers",t])}let f=await this.store.pipeline(l).exec(),h={},g={};for(let e=0;e<f.length;e++){let t=f[e],i=o[e];g[i]=t[1];for(let e=0;e<t[1].length;e++){let n=t[1][e];h[n]?h[n].push(i):h[n]=[i],r.keys.scanned.add(n)}}let d=Object.keys(h);l=d.map(e=>["exists",e]);let y=await this.store.pipeline(l).exec(),p={};for(let e=0;e<d.length;e++){let t=d[e];if(1!==y[e][1])for(let e=0;e<h[t].length;e++){let i=h[t][e];p[i]?p[i].push(t):p[i]=[t],r.keys.removed.add(t)}}let m=Object.keys(p),v=[];for(let e=0;e<m.length;e++){let t=m[e];g[t].length===p[t].length?(v.push(["del",t]),r.references.removed.push(t)):v.push(["srem",t,p[t]])}if(await this.store.pipeline(v).exec(),c=v.length,"lazy"===e&&r.references.scanned.length>=s)break}while(l!==n&&u>0&&c>0);r.cursor=n,r.keys.scanned=Array.from(r.keys.scanned),r.keys.removed=Array.from(r.keys.removed)}catch(e){this.log.error({msg:"acd/storage/redis.gc error",err:e}),r.error=e}return r}}return $=s}());let r=function(){let e;if(o)return s;o=1;let t=function(){if(n)return i;n=1;var e=function(){if(O)return A;function e(e){if("function"!=typeof e)throw Error("obliterator/iterator: expecting a function!");this.next=e}return O=1,"u">typeof Symbol&&(e.prototype[Symbol.iterator]=function(){return this}),e.of=function(){var t=arguments,r=t.length,i=0;return new e(function(){return i>=r?{done:!0}:{done:!1,value:t[i++]}})},e.empty=function(){return new e(function(){return{done:!0}})},e.fromSequence=function(t){var r=0,i=t.length;return new e(function(){return r>=i?{done:!0}:{done:!1,value:t[r++]}})},e.is=function(t){return t instanceof e||"object"==typeof t&&null!==t&&"function"==typeof t.next},A=e}(),t=K(),r=L(),s=function(){if(N)return P;N=1;var e=K(),t=L();function r(e){return"number"==typeof e.length?e.length:"number"==typeof e.size?e.size:void 0}return P.isArrayLike=function(e){return Array.isArray(e)||t.isTypedArray(e)},P.guessLength=r,P.toArray=function(t){var i=r(t),n="number"==typeof i?Array(i):[],s=0;return e(t,function(e){n[s++]=e}),n},P.toArrayWithIndices=function(i){var n=r(i),s="number"==typeof n?t.getPointerArray(n):Array,o="number"==typeof n?Array(n):[],a="number"==typeof n?new s(n):[],l=0;return e(i,function(e){o[l]=e,a[l]=l++}),[o,a]},P}();function o(e,t,i){if(arguments.length<2&&(i=e,e=null,t=null),this.capacity=i,"number"!=typeof this.capacity||this.capacity<=0)throw Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=r.getPointerArray(i);this.forward=new n(i),this.backward=new n(i),this.K="function"==typeof e?new e(i):Array(i),this.V="function"==typeof t?new t(i):Array(i),this.size=0,this.head=0,this.tail=0,this.items={}}return o.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},o.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var r=this.backward[e],i=this.forward[e];return this.tail===e?this.tail=r:this.backward[i]=r,this.forward[r]=i,this.backward[t]=e,this.head=e,this.forward[e]=t,this},o.prototype.set=function(e,t){var r=this.items[e];if("u">typeof r){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r},o.prototype.setpop=function(e,t){var r=null,i=null,n=this.items[e];return"u">typeof n?(this.splayOnTop(n),r=this.V[n],this.V[n]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],r=this.V[n],i=this.K[n],delete this.items[i]),this.items[e]=n,this.K[n]=e,this.V[n]=t,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:r}:null)},o.prototype.has=function(e){return e in this.items},o.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]},o.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]},o.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,i=this.size,n=this.head,s=this.K,o=this.V,a=this.forward;r<i;)e.call(t,o[n],s[n],this),n=a[n],r++},o.prototype.keys=function(){var t=0,r=this.size,i=this.head,n=this.K,s=this.forward;return new e(function(){if(t>=r)return{done:!0};var e=n[i];return++t<r&&(i=s[i]),{done:!1,value:e}})},o.prototype.values=function(){var t=0,r=this.size,i=this.head,n=this.V,s=this.forward;return new e(function(){if(t>=r)return{done:!0};var e=n[i];return++t<r&&(i=s[i]),{done:!1,value:e}})},o.prototype.entries=function(){var t=0,r=this.size,i=this.head,n=this.K,s=this.V,o=this.forward;return new e(function(){if(t>=r)return{done:!0};var e=n[i],a=s[i];return++t<r&&(i=o[i]),{done:!1,value:[e,a]}})},"u">typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.entries),o.prototype.inspect=function(){for(var e,t=new Map,r=this.entries();!(e=r.next()).done;)t.set(e.value[0],e.value[1]);return Object.defineProperty(t,"constructor",{value:o,enumerable:!1}),t},"u">typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(e,r,i,n){if(arguments.length<2){if("number"!=typeof(n=s.guessLength(e)))throw Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else 2==arguments.length&&(n=r,r=null,i=null);var a=new o(r,i,n);return t(e,function(e,t){a.set(t,e)}),a},i=o}(),{abstractLogging:r}=v(),a=b(),{findMatchingIndexes:l,findNotMatching:u,bsearchIndex:c,wildcardMatch:f}=v(),h="u">typeof globalThis.setImmediate?globalThis.setImmediate:(e,...t)=>setTimeout(e,0,...t);class g extends a{constructor(e={}){if(e.size&&("number"!=typeof e.size||e.size<1))throw Error("size must be a positive integer greater than 0");super(e),this.size=e.size||1024,this.log=e.log||r(),this.invalidation=e.invalidation||!1,this.init()}init(){this.store=new t(this.size),this.invalidation&&(this.keysReferences=new Map,this.referencesKeys=new Map)}get(e){this.log.debug({msg:"acd/storage/memory.get",key:e});let t=this.store.get(e);if(t){if(this.log.debug({msg:"acd/storage/memory.get, entry",entry:t,now:d()}),t.start+t.ttl>d())return this.log.debug({msg:"acd/storage/memory.get, key is NOT expired",key:e,entry:t}),t.value;this.log.debug({msg:"acd/storage/memory.get, key is EXPIRED",key:e,entry:t}),h(()=>this.remove(e))}}getTTL(e){this.log.debug({msg:"acd/storage/memory.getTTL",key:e});let t=this.store.peek(e),r=0;return t&&(r=t.start+t.ttl-d())<0&&(r=0),r}set(e,t,r,i){let n;if(this.log.debug({msg:"acd/storage/memory.set",key:e,value:t,ttl:r,references:i}),!(r=Number(r))||r<0)return;let s=this.store.has(e),o=this.store.setpop(e,{value:t,ttl:r,start:d()});if(this.log.debug({msg:"acd/storage/memory.set, evicted",removed:o}),o&&o.evicted&&(this.log.debug({msg:"acd/storage/memory.set, remove evicted key",key:o.key}),this._removeReferences([o.key])),!i||i.length<1)return;if(!this.invalidation)return void this.log.warn({msg:"acd/storage/memory.set, invalidation is disabled, references are useless"});if(i=[...new Set(i)],s&&(n=this.keysReferences.get(e),this.log.debug({msg:"acd/storage/memory.set, current keys-references",key:e,references:n}),n))for(let t of(n.sort(),i.sort(),u(i,n))){let r=this.referencesKeys.get(t);if(!r)continue;let i=c(r,e);if(!(i<0)){if(r.splice(i,1),r.length<1){this.referencesKeys.delete(t);continue}this.referencesKeys.set(t,r)}}let a=n?u(n,i):i;for(let t=0;t<a.length;t++){let r=a[t],i=this.referencesKeys.get(r);i?(this.log.debug({msg:"acd/storage/memory.set, add reference-key",key:e,reference:r}),i.push(e)):i=[e],this.log.debug({msg:"acd/storage/memory.set, set reference-keys",keys:i,reference:r}),this.referencesKeys.set(r,i)}this.keysReferences.set(e,i)}remove(e){this.log.debug({msg:"acd/storage/memory.remove",key:e});let t=this._removeKey(e);return this._removeReferences([e]),t}_removeKey(e){return this.log.debug({msg:"acd/storage/memory._removeKey",key:e}),!!this.store.has(e)&&(this.store.set(e,void 0),!0)}_removeReferences(e){if(!this.invalidation)return;this.log.debug({msg:"acd/storage/memory._removeReferences",keys:e});let t=new Set;for(let r=0;r<e.length;r++){let i=e[r],n=this.keysReferences.get(i);if(n){for(let e=0;e<n.length;e++)t.add(n[e]);this.log.debug({msg:"acd/storage/memory._removeReferences, delete key-references",key:i}),this.keysReferences.delete(i)}}this._removeReferencesKeys([...t],e)}_removeReferencesKeys(e,t){t.sort(),this.log.debug({msg:"acd/storage/memory._removeReferencesKeys",references:e,keys:t});for(let r=0;r<e.length;r++){let i=e[r],n=this.referencesKeys.get(i);if(this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, get reference-key",reference:i,keys:t,referencesKeys:n}),!n)continue;let s=l(t,n);if(this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, removing",reference:i,referencesToRemove:s,referencesKeys:n}),s.length===n.length){this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, delete",reference:i}),this.referencesKeys.delete(i);continue}for(let e=s.length-1;e>=0;e--)this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, remove",reference:i,referencesKeys:n,at:s[e]}),n.splice(s[e],1)}}invalidate(e){return this.invalidation?(this.log.debug({msg:"acd/storage/memory.invalidate",references:e}),Array.isArray(e)?this._invalidateReferences(e):this._invalidateReference(e)):(this.log.warn({msg:"acd/storage/memory.invalidate, exit due invalidation is disabled"}),[])}_invalidateReferences(e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],n=this.referencesKeys.get(i);if(this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove keys on reference",reference:i,keys:n}),n){for(let e=0;e<n.length;e++){let r=n[e];this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove key on reference",reference:i,key:r}),this._removeKey(r)&&t.push(r)}this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove references of",reference:i,keys:n}),this._removeReferences([...n])}}return t}_invalidateReference(e){if(e.includes("*")){let t=[];for(let r of this.referencesKeys.keys())f(e,r)&&t.push(r);return this._invalidateReferences(t)}let t=this.referencesKeys.get(e),r=[];if(this.log.debug({msg:"acd/storage/memory._invalidateReference, remove keys on reference",reference:e,keys:t}),!t)return r;for(let i=0;i<t.length;i++){let n=t[i];this.log.debug({msg:"acd/storage/memory._invalidateReference, remove key on reference",reference:e,key:n}),this._removeKey(n)&&r.push(n)}return this.log.debug({msg:"acd/storage/memory._invalidateReference, remove references of",reference:e,keys:t}),this._removeReferences([...t]),r}clear(e){if(this.log.debug({msg:"acd/storage/memory.clear",name:e}),!e){if(this.store.clear(),!this.invalidation)return;this.referencesKeys.clear(),this.keysReferences.clear();return}let t=[];this.store.forEach((r,i)=>{this.log.debug({msg:"acd/storage/memory.clear, iterate key",key:i}),0===i.indexOf(e)&&(this.log.debug({msg:"acd/storage/memory.clear, remove key",key:i}),t.push(i))});let r=[];for(let e=0;e<t.length;e++)this._removeKey(t[e])&&r.push(t[e]);return this._removeReferences(r),r}refresh(){this.log.debug({msg:"acd/storage/memory.refresh"}),this.init()}}function d(){if(void 0!==e)return e;e=Math.floor(Date.now()/1e3);let t=setTimeout(y,1e3);return"function"==typeof t.unref&&t.unref(),e}function y(){e=void 0}return s=g}(),u="redis";return a=function(i,n){if(!t&&i===u)throw Error("Redis storage is not supported in the browser");return i===u?new e(n):new r(n)}}var U=function(){if(f)return c;f=1;let{Cache:e}=function(){if(u)return y;u=1;let{kValues:e,kStorage:t,kStorages:r,kTransfromer:i,kTTL:n,kOnDedupe:s,kOnError:o,kOnHit:a,kOnMiss:l,kStale:c}=function(){if(g)return h;g=1;let e=Symbol("values"),t=Symbol("kStorage"),r=Symbol("kStorages"),i=Symbol("kTransformer"),n=Symbol("kTTL"),s=Symbol("kOnDedupe"),o=Symbol("kOnError"),a=Symbol("kOnHit");return h={kValues:e,kStorage:t,kStorages:r,kTransfromer:i,kTTL:n,kOnDedupe:s,kOnError:o,kOnHit:a,kOnMiss:Symbol("kOnMiss"),kStale:Symbol("kStale")}}(),f=m(),d=I();class p{constructor(u={}){if(!u.storage)throw Error("storage is required");if(u.ttl&&"number"==typeof u.ttl&&(u.ttl<0||!Number.isInteger(u.ttl)))throw Error("ttl must be a positive integer greater than 0");if(u.onDedupe&&"function"!=typeof u.onDedupe)throw Error("onDedupe must be a function");if(u.onError&&"function"!=typeof u.onError)throw Error("onError must be a function");if(u.onHit&&"function"!=typeof u.onHit)throw Error("onHit must be a function");if(u.onMiss&&"function"!=typeof u.onMiss)throw Error("onMiss must be a function");if("number"==typeof u.stale&&!(Math.floor(u.stale)===u.stale&&u.stale>=0))throw Error("stale must be an integer greater or equal to 0");this[e]={},this[t]=u.storage,this[r]=new Map,this[r].set("_default",u.storage),this[i]=u.transformer,this[n]=u.ttl||0,this[s]=u.onDedupe||w,this[o]=u.onError||w,this[a]=u.onHit||w,this[l]=u.onMiss||w,this[c]=u.stale||0}define(u,f,h){let g;if("function"==typeof f&&(h=f,f={}),u&&this[u])throw Error(`${u} is already defined in the cache or it is a forbidden name`);if(f=f||{},"function"!=typeof h)throw TypeError(`Missing the function parameter for '${u}'`);let y=f.serialize;if(y&&"function"!=typeof y)throw TypeError("serialize must be a function");let p=f.references;if(p&&"function"!=typeof p)throw TypeError("references must be a function");if("function"!=typeof f.ttl&&f.ttl&&("number"!=typeof f.ttl||f.ttl<0||!Number.isInteger(f.ttl)))throw Error("ttl must be a positive integer greater than 0");f.storage?(g=d(f.storage.type,f.storage.options),this[r].set(u,g)):g=this[t];let m=void 0!==f.ttl?f.ttl:this[n],b=void 0!==f.stale?f.stale:this[c],w=f.onDedupe||this[s],S=f.onError||this[o],k=f.onHit||this[a],E=f.onMiss||this[l],$=f.transformer||this[i],R=new v(h,u,y,p,g,$,m,w,S,k,E,b);return this[e][u]=R,this[u]=R.add.bind(R),this}async clear(t,r){if(t){if(!this[e][t])throw Error(`${t} is not defined in the cache`);await this[e][t].clear(r);return}let i=[];for(let t of Object.values(this[e]))i.push(t.clear());await Promise.all(i)}async get(t,r){if(!this[e][t])throw Error(`${t} is not defined in the cache`);return this[e][t].get(r)}async set(t,r,i,n,s){if(!this[e][t])throw Error(`${t} is not defined in the cache`);return this[e][t].set(r,i,n,s)}async invalidate(t,r){if(!this[e][t])throw Error(`${t} is not defined in the cache`);return this[e][t].invalidate(r)}async invalidateAll(e,t="_default"){if(!this[r].has(t))throw Error(`${t} storage is not defined in the cache`);await this[r].get(t).invalidate(e)}}class v{constructor(e,t,r,i,n,s,o,a,l,u,c,f){this.dedupes=new Map,this.func=e,this.name=t,this.serialize=r,this.references=i,this.storage=n,this.transformer=s,this.ttl=o,this.onDedupe=a,this.onError=l,this.onHit=u,this.onMiss=c,this.stale=f}getKey(e){let t=this.serialize?this.serialize(e):e;return"string"==typeof t?t:f(t)}getStorageKey(e){return`${this.name}~${e}`}getStorageName(){return`${this.name}~`}add(e){try{let t=this.getKey(e),r=this.dedupes.get(t);return r?this.onDedupe(t):(r=new b,this.buildPromise(r,e,t),this.dedupes.set(t,r)),r.promise}catch(e){this.onError(e)}}async wrapFunction(e,t){let r=this.getStorageKey(t);if(this.ttl>0||"function"==typeof this.ttl){let i=await this.get(r);if(void 0!==i){this.onHit(t);let n="function"==typeof this.stale?this.stale(i):this.stale;return n>0&&await this.storage.getTTL(r)<=n&&this._wrapFunction(r,e,t).catch(w),i}this.onMiss(t)}return this._wrapFunction(r,e,t)}async _wrapFunction(e,t,r){let i=await this.func(t,r),n="function"==typeof this.stale?this.stale(i):this.stale,s="function"==typeof this.ttl?this.ttl(i):this.ttl;if(null==s||"number"!=typeof s||!Number.isInteger(s))return this.onError(Error("ttl must be an integer")),i;if((s+=n)<1)return i;if(!this.references)return await this.set(e,i,s),i;try{let n=this.references(t,r,i),o=i;n&&"function"==typeof n.then&&(n=await n),this.transformer&&(o=this.transformer.serialize(i)),await this.storage.set(e,o,s,n)}catch(e){this.onError(e)}return i}buildPromise(e,t,r){e.promise=this.wrapFunction(t,r),e.promise.then(e=>(this.dedupes.delete(r),e)).catch(e=>{this.onError(e),this.dedupes.delete(r);let t=this.storage.remove(this.getStorageKey(r));t&&"function"==typeof t.catch&&t.catch(w)})}async clear(e){if(e){let t=this.getKey(e);this.dedupes.delete(t),await this.storage.remove(this.getStorageKey(t));return}await this.storage.clear(this.getStorageName()),this.dedupes.clear()}async get(e){let t=await this.storage.get(e);return this.transformer&&t?await this.transformer.deserialize(t):t}async set(e,t,r,i){return this.transformer&&(t=this.transformer.serialize(t)),this.storage.set(e,t,r,i)}async invalidate(e){return this.storage.invalidate(e)}}class b{constructor(){this.promise=null}}function w(){}return y.Cache=p,y}(),t=I();return c={Cache:e,createCache:function(r){r?r.storage||(r.storage={type:"memory"}):r={storage:{type:"memory"}};let i=t(r.storage.type,r.storage.options);return new e({...r,storage:i})},createStorage:t}}();let C=0,F=[];Symbol("clean");let J=[],V=0,D=e=>{let t=[],r={get:()=>(r.lc||r.listen(()=>{})(),r.value),lc:0,listen:e=>(r.lc=t.push(e),()=>{for(let t=V+4;t<J.length;)J[t]===e?J.splice(t,4):t+=4;let i=t.indexOf(e);~i&&(t.splice(i,1),--r.lc||r.off())}),notify(e,i){let n=!J.length;for(let n of t)J.push(n,r.value,e,i);if(n){for(V=0;V<J.length;V+=4)J[V](J[V+1],J[V+2],J[V+3]);J.length=0}},off(){},set(e){let t=r.value;t!==e&&(r.value=e,r.notify(t))},subscribe(e){let t=r.listen(e);return e(r.value),t},value:e};return r},B=typeof document>"u"?"server":"browser";function q(e){return e.withConfig({allowReconfigure:!1})}let H=e=>{let{ssr:t=!1,tag:i="core-loader"}=e;if(t&&e.client)throw TypeError("`client` option is not allowed when `ssr: true`, use `setServerClient` from your server entry point instead");if(!t&&!1===e.client)throw TypeError("You must set `ssr: true` when `client: false` is used");if(!t&&!e.client)throw TypeError("`client` is required");let n=t?void 0:q(e.client);function s(e){return U.createCache().define("fetch",async t=>{if(!e)throw Error("You have to set the Sanity client with `setServerClient` before any data fetching is done");let{query:r,params:n={},perspective:s,useCdn:o,stega:a}=JSON.parse(t),{result:l,resultSourceMap:u}=await e.fetch(r,n,{tag:i,filterResponse:!1,perspective:s,useCdn:o,stega:a});return{result:l,resultSourceMap:u}})}function o(){let e=n?.config().perspective||"published";return a.instance=s(n),{hydrate:(t,r,i)=>({loading:i?.data===void 0||i?.sourceMap===void 0,error:void 0,data:i?.data,sourceMap:i?.sourceMap,perspective:e}),fetch:(t,r,i,n)=>{if(n.signal.aborted)return;let s=(C+=1,()=>{if(0==(C-=1)){let e=F;for(let t of(F=[],e))t()}});i.setKey("loading",!0),i.setKey("error",void 0),a.instance.fetch(JSON.stringify({query:t,params:r})).then(t=>{n.signal.aborted||(i.setKey("data",t.result),i.setKey("sourceMap",t.resultSourceMap),i.setKey("perspective",e))}).catch(e=>{i.setKey("error",e)}).finally(()=>{i.setKey("loading",!1),s()})}}}let a={instance:s(n)},l=D(n?o():void 0),u=(e=>{let{ssr:t,setFetcher:i}=e;return n=>{let s;if("server"===B)throw Error("Live mode is not supported in server environments");if(t&&!n.client)throw Error("The `client` option in `enableLiveMode` is required");let o=n.client||e.client||void 0,a=new AbortController;return Promise.all([r.e(682),r.e(5457)]).then(r.bind(r,35457)).then(({enableLiveMode:e})=>{a.signal.aborted||(s=e({...n,client:o,setFetcher:i,ssr:t}))}),()=>{a.abort(),s?.()}}})({client:n||void 0,ssr:t,setFetcher:e=>{let t=l.get();return l.set(e),()=>l.set(t)}}),c={instance:void 0,canPreviewDrafts:!1};return{createFetcherStore:(e,t={},r)=>{let i=l.get(),n=((e={})=>{let t=D(e);return t.setKey=function(e,r){let i=t.value;typeof r>"u"&&e in t.value?(t.value={...t.value},delete t.value[e],t.notify(i,e)):t.value[e]!==r&&(t.value={...t.value,[e]:r},t.notify(i,e))},t})(i?i.hydrate(e,t,r):{loading:!1,error:typeof r?.data>"u"?Error("The `initial` option is required when `ssr: true`"):void 0,data:r?.data,sourceMap:r?.sourceMap,perspective:r?.perspective});return((e,t)=>((e,t,r,i)=>(e.events=e.events||{},e.events[r+10]||(e.events[r+10]=i(t=>{e.events[r].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let i=e.events[r],n=i.indexOf(t);i.splice(n,1),i.length||(delete e.events[r],e.events[r+10](),delete e.events[r+10])}))(e,r=>{let i=t(r);i&&e.events[6].push(i)},5,t=>{let r=e.listen;e.listen=(...i)=>(e.lc||e.active||(e.active=!0,t()),r(...i));let i=e.off;return e.events[6]=[],e.off=()=>{i(),setTimeout(()=>{if(e.active&&!e.lc){for(let t of(e.active=!1,e.events[6]))t();e.events[6]=[]}},1e3)},()=>{e.listen=r,e.off=i}}))(n,()=>{let r=new AbortController,i=l.subscribe(i=>{!i||r.signal.aborted||(r.abort(),r=new AbortController,i.fetch(e,t,n,r))});return()=>{r.abort(),i()}}),n},enableLiveMode:u,setServerClient:e=>{if("server"!==B)throw Error("`setServerClient` can only be called in server environments, detected: "+JSON.stringify(B));if(!t)throw Error("`setServerClient` can only be called when `ssr: true`");c.instance=n=q(e),c.canPreviewDrafts=!!n.config().token,l.set(o())},unstable__cache:a,unstable__serverClient:c}}},9917:(e,t,r)=>{r.d(t,{XL:()=>h,IT:()=>g});var i,n,s=r(9637),o=r(21462),a=r(90111),l=r(40752),u=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((n||(n=1,i=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=i;0!=n--;){var i,n,s,o=s[n];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}),i));let{loadQuery:c,setServerClient:f,useLiveMode:h,useQuery:g}=(e=>{let{createFetcherStore:t,enableLiveMode:r}=(0,s.KS)({tag:"react-loader",...e}),i=function(e){let t="object"==typeof e?e?.config().stega.studioUrl:void 0,r=t,i=new Set;return{subscribe:e=>(i.add(e),()=>i.delete(e)),getSnapshot:()=>t,getServerSnapshot:()=>r,setStudioUrl(e){t=e,i.forEach(e=>e())}}}(e.client);return{loadQuery:()=>{throw Error("The `loadQuery` function is server only.")},useQuery:function({createFetcherStore:e,studioUrlStore:t}){let r={};return(i,n=r,s={})=>{var c,f;let h=(0,o.useMemo)(()=>s.initial?{perspective:"published",...s.initial}:void 0,[s.initial]),g=(0,o.useMemo)(()=>JSON.stringify(n),[n]),[d,y]=(0,o.useState)(()=>e(i,JSON.parse(g),h).value);(0,o.useEffect)(()=>{let t=e(i,JSON.parse(g),h).subscribe(e=>{y(t=>u(t.sourceMap,e.sourceMap)&&u(t.data,e.data)&&t.error===e.error&&t.loading===e.loading&&t.perspective===e.perspective?t:e)});return()=>t()},[g,h,i]);let p=(0,o.useSyncExternalStore)(t.subscribe,t.getSnapshot,t.getServerSnapshot),m=(c=d.data,f=d.sourceMap,(0,o.useMemo)(()=>(function e(t,r,i,n){let s=e=>e?"string"==typeof e?a.C.fromString(e):e:[],o=s(n);return Object.assign(e=>((e,t,r,i)=>{if(!t||!r)return;let n=(0,a.EH)(i),s=(0,a.Nx)({resultPath:n,resultSourceMap:t,studioUrl:r});if(s)return(0,l.Rw)({baseUrl:s.baseUrl,workspace:s.workspace,tool:s.tool,type:s.type,id:s.id,path:"string"==typeof s.path?s.path:a.C.toString((0,a._y)(s.path))})})(0,r,i,[...o,...s(e)]),{scope:n=>e(t,r,i,[...o,...s(n)])})})(c,f,p),[c,f,p]));return(0,o.useMemo)(()=>({...d,encodeDataAttribute:m}),[d,m])}}({createFetcherStore:t,studioUrlStore:i}),setServerClient:()=>{throw Error("The `setServerClient` function is server only.")},useLiveMode:function({enableLiveMode:e,setStudioUrl:t}){return({allowStudioOrigin:r,client:i,onConnect:n,onDisconnect:s,onPerspective:a,studioUrl:l})=>{(0,o.useEffect)(()=>{r&&console.warn("`allowStudioOrigin` is deprecated and no longer needed");let t=e({client:i,onConnect:n,onDisconnect:s,onPerspective:a});return()=>t()},[r,i,n,s,a]),(0,o.useEffect)(()=>{t(l??"object"==typeof i?i?.config().stega.studioUrl:void 0)},[l,i])}}({enableLiveMode:r,setStudioUrl:i.setStudioUrl})}})({client:!1,ssr:!0})},40752:(e,t,r)=>{r.d(t,{Rw:()=>u,bX:()=>p,hy:()=>l});var i=r(90111),n=r(26384);let s=(0,n.FsL)((0,n.YjP)(),(0,n.BpQ)(1)),o=(0,n.lqM)(s),a=(0,n.Ikc)({baseUrl:s,dataset:o,id:s,path:s,projectId:o,tool:o,type:o,workspace:o});function l(e){let t="";for(let r of e){if("string"==typeof r){t&&(t+="."),t+=r;continue}if("number"==typeof r){t&&(t+=":"),t+=`${r}`;continue}if(null!==r&&Array.isArray(r)){t&&(t+=":"),t+=`${r.join(",")}}`;continue}if(r._key){t&&(t+=":"),t+=`${r._key}`;continue}}return t}function u(e){let{id:t,path:r,baseUrl:s,tool:o,workspace:u,type:c}=e;return(0,n.is)(a,e)?[["id",(0,i.IM)(t)],["type",c],["path",l(i.C.fromString(r))],["base",encodeURIComponent(s)],["workspace",u],["tool",o]].filter(([,e])=>!!e).map(e=>e.join("=")).join(";"):void 0}let c=/^([\w-]+):(0|[1-9][0-9]*)$/,f=/^([\w-]+):([0-9]+),([0-9]+)$/,h=/^([\w-]+):([\w-]+)$/,g=(0,n.FsL)((0,n.YjP)(),(0,n.BpQ)(1)),d=(0,n.Ikc)({origin:g,href:g,data:(0,n.lqM)((0,n.g1P)((0,n.YjP)(),(0,n.L5J)()))});function y(e){let t=(0,n.xLC)(a,e);if(t.success)return t.output;let r=(0,n.xLC)(d,e);if(r.success)try{let e=new URL(r.output.href,typeof document>"u"?"https://example.com":location.origin);return e.searchParams.size>0?(0,n.qgA)(a,Object.fromEntries(e.searchParams.entries())):r.output}catch(e){return console.error("Failed to parse sanity node",e),r.output}}function p(e){if("object"==typeof e&&null!==e)return y(e);try{let t=JSON.parse(e);return y(t)}catch{let t=e.split(";").reduce((e,t)=>{let[r,n]=t.split("=");if(!r||t.includes("=")&&!n)return e;switch(r){case"id":e.id=n;break;case"type":e.type=n;break;case"path":e.path=i.C.toString(function(e){let t=[];for(let r of e.split(".")){let e=c.exec(r);if(e){t.push(e[1],Number(e[2]));continue}let i=f.exec(r);if(i){t.push(i[1],[Number(i[2]),Number(i[3])]);continue}let n=h.exec(r);if(n){t.push(n[1],{_key:n[2]});continue}t.push(r)}return t}(n));break;case"base":e.baseUrl=decodeURIComponent(n);break;case"tool":e.tool=n;break;case"workspace":e.workspace=n;break;case"projectId":e.projectId=n;break;case"dataset":e.dataset=n}return e},{});if((0,n.is)(a,t))return t;return}}}}]);